# PRD: InBody í•´ì™¸ë²•ì¸ ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ (MVP)

## ğŸ“‹ ë¬¸ì„œ ì •ë³´

| í•­ëª© | ë‚´ìš© |
|------|------|
| **í”„ë¡œì íŠ¸ëª…** | InBody Global Business Support Dashboard |
| **ë²„ì „** | v0.1.0 (MVP) |
| **ì‘ì„±ì¼** | 2026-01-07 |
| **ë‹´ë‹¹ì** | ì¡°ìŠ¹í˜„ (Global Business Support Team) |
| **ë°ëª¨ ëª©í‘œì¼** | 2026-01-10 (ê¸ˆìš”ì¼) |
| **Repository** | `subsidiary-dashboard` |
| **ë°°í¬ URL** | TBD (Vercel) |

---

## ğŸ“‘ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#1-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­](#2-ê¸°ëŠ¥-ìš”êµ¬ì‚¬í•­)
3. [ê¸°ìˆ  ì‚¬ì–‘](#3-ê¸°ìˆ -ì‚¬ì–‘)
4. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#4-ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
5. [Cursor AI ê°œë°œ ê°€ì´ë“œ](#5-cursor-ai-ê°œë°œ-ê°€ì´ë“œ)
6. [ê°œë°œ ì¼ì •](#6-ê°œë°œ-ì¼ì •)
7. [ë°°í¬ ë° í…ŒìŠ¤íŠ¸](#7-ë°°í¬-ë°-í…ŒìŠ¤íŠ¸)
8. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#8-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 ë°°ê²½ ë° ëª©ì 

**í˜„ì¬ ë¬¸ì œì :**
- 17ê°œ í•´ì™¸ë²•ì¸ì˜ ì¬ë¬´ ë°ì´í„°ê°€ ê°œë³„ ì—‘ì…€ë¡œ ë¶„ì‚° ê´€ë¦¬
- í†µí•© í˜„í™© íŒŒì•…ì´ ì–´ë µê³  ì‹œê°„ ì†Œìš”
- ë¶€ì‚¬ì¥ë‹˜ì´ ìš”ì²­í•˜ëŠ” ì‹¤ì‹œê°„ í˜„í™© íŒŒì•… ë¶ˆê°€

**ì†”ë£¨ì…˜:**
- ì„¸ê³„ì§€ë„ ê¸°ë°˜ ì¸í„°ë™í‹°ë¸Œ ëŒ€ì‹œë³´ë“œ
- ë²•ì¸ë³„ ì¬ë¬´ ì‹¤ì  ì‹œê°í™”
- ì›í´ë¦­ìœ¼ë¡œ í•µì‹¬ ì§€í‘œ í™•ì¸

**í•µì‹¬ ê°€ì¹˜ ì œì•ˆ:**
1. â±ï¸ **ì‹œê°„ ì ˆì•½**: ì—‘ì…€ ì·¨í•© ì‘ì—… ì œê±°
2. ğŸ“Š **ì§ê´€ì  ì‹œê°í™”**: ì§€ë„ + ì°¨íŠ¸ë¡œ í•œëˆˆì— íŒŒì•…
3. ğŸŒ **ì›¹ ì ‘ê·¼ì„±**: ì–¸ì œ ì–´ë””ì„œë‚˜ ë¸Œë¼ìš°ì €ë¡œ í™•ì¸
4. ğŸ”„ **í™•ì¥ ê°€ëŠ¥ì„±**: í–¥í›„ ì¶”ê°€ ê¸°ëŠ¥ í†µí•© ìš©ì´

### 1.2 ì‚¬ìš©ì í˜ë¥´ì†Œë‚˜

**Primary User: ë¶€ì‚¬ì¥ë‹˜**
- ëª©ì : ê²½ì˜ì§„ ë³´ê³ ìš© í˜„í™© íŒŒì•…
- ì‚¬ìš© ë¹ˆë„: ì£¼ 2-3íšŒ
- ë‹ˆì¦ˆ: ì „ì²´ ë²•ì¸ ì‹¤ì  í•œëˆˆì— ë³´ê¸°, ëª©í‘œ ë‹¬ì„± ì—¬ë¶€

**Secondary User: GBS íŒ€ (ë³¸ì¸)**
- ëª©ì : ì¼ìƒ ì—…ë¬´ ëª¨ë‹ˆí„°ë§ ë° ë°ì´í„° ê´€ë¦¬
- ì‚¬ìš© ë¹ˆë„: ì¼ 1-2íšŒ
- ë‹ˆì¦ˆ: ë²•ì¸ë³„ ì„¸ë¶€ ë°ì´í„°, ì´ìƒì¹˜ íƒì§€

**Tertiary User: ì¬ë¬´/íšŒê³„íŒ€**
- ëª©ì : ë°ì´í„° ê²€ì¦ ë° ë¶„ì„
- ì‚¬ìš© ë¹ˆë„: ì›” 1-2íšŒ (ê²°ì‚° ì‹œì¦Œ)
- ë‹ˆì¦ˆ: Export ê¸°ëŠ¥, íˆìŠ¤í† ë¦¬ ì¶”ì 

### 1.3 ì„±ê³µ ì§€í‘œ

**MVP (ê¸ˆìš”ì¼ ë°ëª¨)**
- [ ] ë¶€ì‚¬ì¥ë‹˜ì´ "ì´ ë°©í–¥ìœ¼ë¡œ ê³„ì† ì§„í–‰" ìŠ¹ì¸
- [ ] 14ê°œ ë²•ì¸ì´ ì§€ë„ì— ì •í™•íˆ í‘œì‹œ
- [ ] ë²•ì¸ í´ë¦­ â†’ ì¬ë¬´ ë°ì´í„° 1ì´ˆ ì´ë‚´ í‘œì‹œ
- [ ] ì°¨íŠ¸ê°€ ì˜ë¯¸ìˆëŠ” ì¶”ì´ í‘œì‹œ

**Phase 2 (3ì£¼ í›„)**
- [ ] ì£¼ 1íšŒ ì´ìƒ ì‹¤ì œ ì—…ë¬´ì—ì„œ ì‚¬ìš©
- [ ] ì—‘ì…€ ë³´ê³ ì„œ 50% ëŒ€ì²´
- [ ] íŒ€ì› 3ëª… ì´ìƒ í™œìš©

---

## 2. ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

### 2.1 MVP ê¸°ëŠ¥ (Phase 1)

#### F1. ì„¸ê³„ì§€ë„ ì‹œê°í™” â­ï¸â­ï¸â­ï¸

**Description:**
- ì„¸ê³„ì§€ë„ ë°°ê²½ì— 14ê°œ í•´ì™¸ë²•ì¸ ìœ„ì¹˜ë¥¼ ë§ˆì»¤ë¡œ í‘œì‹œ
- ì§€ì—­ë³„ ìƒ‰ìƒ êµ¬ë¶„ (Americas, Europe, Asia-Pacific)

**Requirements:**
- [ ] Mercator projection ì‚¬ìš©
- [ ] ë²•ì¸ ë§ˆì»¤ëŠ” ì›í˜• (radius: 8-12px)
- [ ] Hover ì‹œ ë²•ì¸ëª… tooltip í‘œì‹œ
- [ ] í´ë¦­ ì‹œ í•´ë‹¹ ë²•ì¸ ìƒì„¸ ì •ë³´ í‘œì‹œ
- [ ] ì„ íƒëœ ë§ˆì»¤ëŠ” í¬ê¸° í™•ëŒ€ ë° ê°•ì¡°

**Technical Details:**
```typescript
// ë§ˆì»¤ ìœ„ì¹˜ ê³„ì‚°
interface SubsidiaryMarker {
  id: string;
  name: string;
  coordinates: [longitude, latitude]; // [-180 to 180, -90 to 90]
  region: 'Americas' | 'Europe' | 'Asia-Pacific';
}

// ì§€ì—­ë³„ ìƒ‰ìƒ
const REGION_COLORS = {
  'Americas': '#3B82F6',    // blue-500
  'Europe': '#10B981',      // green-500
  'Asia-Pacific': '#F59E0B' // amber-500
};
```

**Acceptance Criteria:**
- 14ê°œ ë²•ì¸ì´ ëª¨ë‘ ì˜¬ë°”ë¥¸ ìœ„ì¹˜ì— í‘œì‹œë¨
- ë§ˆì»¤ hover ì‹œ 0.3ì´ˆ ë‚´ tooltip í‘œì‹œ
- ë§ˆì»¤ í´ë¦­ ì‹œ ì¦‰ì‹œ ë°˜ì‘
- ëª¨ë°”ì¼ì—ì„œë„ í„°ì¹˜ ì¸í„°ë™ì…˜ ì‘ë™

---

#### F2. ë²•ì¸ ì •ë³´ ì¹´ë“œ â­ï¸â­ï¸â­ï¸

**Description:**
- ë²•ì¸ ì„ íƒ ì‹œ ìš°ì¸¡ íŒ¨ë„ì— ì¬ë¬´ ì •ë³´ ì¹´ë“œ í‘œì‹œ
- ìµœê·¼ ë¶„ê¸° ì‹¤ì  ë° í•µì‹¬ ì§€í‘œ í‘œì‹œ

**Requirements:**
- [ ] ë²•ì¸ ê¸°ë³¸ ì •ë³´ (ì´ë¦„, êµ­ê°€, ë„ì‹œ)
- [ ] ìµœê·¼ ë¶„ê¸° ë§¤ì¶œì•¡ (ì›í™”, ì–µì› ë‹¨ìœ„)
- [ ] ìµœê·¼ ë¶„ê¸° ì˜ì—…ì´ìµ (ì›í™”, ì–µì› ë‹¨ìœ„)
- [ ] ì˜ì—…ì´ìµë¥  (%)
- [ ] ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ ì‹œê°„

**UI Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ InBody USA                   [X]â”‚
â”‚ Los Angeles, USA                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2024 Q4 ì‹¤ì                     â”‚
â”‚                                 â”‚
â”‚ ë§¤ì¶œì•¡     â”‚ 550ì–µì›            â”‚
â”‚ ì˜ì—…ì´ìµ   â”‚ 60ì–µì›             â”‚
â”‚ ì˜ì—…ì´ìµë¥  â”‚ 10.9%              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ìµœê·¼ 4ë¶„ê¸° ì¶”ì´ [ì°¨íŠ¸]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Technical Details:**
```typescript
interface FinancialMetrics {
  revenue: number;           // ì›í™” (ì›)
  operatingProfit: number;   // ì›í™” (ì›)
  operatingMargin: number;   // % (ì†Œìˆ˜ì  1ìë¦¬)
  lastUpdated: Date;
}

// í¬ë§·íŒ… í•¨ìˆ˜
function formatKRW(amount: number): string {
  const billion = amount / 100000000; // ì–µì› ë‹¨ìœ„
  return `${billion.toFixed(0)}ì–µì›`;
}

function formatMargin(margin: number): string {
  return `${margin.toFixed(1)}%`;
}
```

**Acceptance Criteria:**
- ë°ì´í„° ë¡œë”© ì¤‘ Skeleton UI í‘œì‹œ
- ìˆ«ì í¬ë§·íŒ… ì •í™• (ì–µì› ë‹¨ìœ„, ì²œë‹¨ìœ„ ì½¤ë§ˆ)
- ì˜ì—…ì´ìµ ë§ˆì´ë„ˆìŠ¤ ì‹œ ë¹¨ê°„ìƒ‰ í‘œì‹œ
- ë‹«ê¸°(X) ë²„íŠ¼ í´ë¦­ ì‹œ ì¹´ë“œ ë‹«í˜

---

#### F3. ì¬ë¬´ ì‹¤ì  ì°¨íŠ¸ â­ï¸â­ï¸

**Description:**
- ìµœê·¼ 4ë¶„ê¸° ë§¤ì¶œ ì¶”ì´ë¥¼ ë§‰ëŒ€ê·¸ë˜í”„ë¡œ ì‹œê°í™”

**Requirements:**
- [ ] Xì¶•: ë¶„ê¸° (ì˜ˆ: 2024 Q1, Q2, Q3, Q4)
- [ ] Yì¶•: ë§¤ì¶œì•¡ (ì–µì› ë‹¨ìœ„)
- [ ] Hover ì‹œ ì •í™•í•œ ê¸ˆì•¡ tooltip
- [ ] ë°˜ì‘í˜• (ëª¨ë°”ì¼ì—ì„œë„ ì½ê¸° ì‰½ê²Œ)

**Chart Configuration:**
```typescript
// Recharts BarChart ì„¤ì •
<BarChart
  data={chartData}
  margin={{ top: 20, right: 30, left: 20, bottom: 5 }}
>
  <CartesianGrid strokeDasharray="3 3" />
  <XAxis dataKey="quarter" />
  <YAxis 
    label={{ value: 'ë§¤ì¶œì•¡ (ì–µì›)', angle: -90, position: 'insideLeft' }}
  />
  <Tooltip formatter={(value) => `${value}ì–µì›`} />
  <Bar dataKey="revenue" fill="#3B82F6" />
</BarChart>
```

**Data Format:**
```typescript
interface ChartDataPoint {
  quarter: string;      // "2024 Q1"
  revenue: number;      // 500 (ì–µì›)
  year: number;         // 2024
  quarterNum: number;   // 1
}
```

**Acceptance Criteria:**
- 4ê°œ ë¶„ê¸° ë°ì´í„° ëª¨ë‘ í‘œì‹œ
- ë§‰ëŒ€ ê°„ê²© ì¼ì •
- tooltip ì •í™•í•œ ê°’ í‘œì‹œ
- ì°¨íŠ¸ ë†’ì´ 300px ì´ìƒ

---

#### F4. ë°ì´í„° ê´€ë¦¬ (Backend) â­ï¸â­ï¸

**Description:**
- Supabaseë¥¼ í†µí•œ ë²•ì¸ ë° ì¬ë¬´ ë°ì´í„° ì €ì¥/ì¡°íšŒ
- ì´ˆê¸° ë°ì´í„°ëŠ” SQLë¡œ ì§ì ‘ ì…ë ¥

**Requirements:**
- [ ] Supabase í”„ë¡œì íŠ¸ ìƒì„± ë° ì—°ë™
- [ ] 2ê°œ í…Œì´ë¸” ìƒì„± (subsidiaries, financial_data)
- [ ] 14ê°œ ë²•ì¸ ë°ì´í„° ì…ë ¥
- [ ] ìƒ˜í”Œ ì¬ë¬´ ë°ì´í„° ì…ë ¥ (ìµœì†Œ 2ë¶„ê¸°)

**Performance:**
- ë°ì´í„° ì¡°íšŒ ì‘ë‹µ ì‹œê°„ < 500ms
- í˜ì´ì§€ ë¡œë“œ ì‹œê°„ < 2ì´ˆ

---

### 2.2 Phase 1ì—ì„œ ì œì™¸ (Phase 2 ì´í›„)

âŒ **ì—‘ì…€ ì—…ë¡œë“œ ê¸°ëŠ¥**
- ì´ìœ : 3ì¼ ë‚´ êµ¬í˜„ ë¶ˆê°€
- ëŒ€ì•ˆ: ì´ˆê¸° ë°ì´í„°ëŠ” SQLë¡œ ì…ë ¥

âŒ **4ê°œ ì¹´í…Œê³ ë¦¬ íƒ­** (ì¬ë¬´ì‹¤ì , ë‚´ë¶€ê±°ë˜, ì‹œìŠ¤í…œ, ì¼ì •í‘œ)
- ì´ìœ : ë²”ìœ„ ì´ˆê³¼
- ê³„íš: Phase 2ì—ì„œ êµ¬í˜„

âŒ **ëª©í‘œ ëŒ€ë¹„ ë‹¬ì„±ë¥  ê³„ì‚°**
- ì´ìœ : ì‹œê°„ ë¶€ì¡±
- ëŒ€ì•ˆ: ëª©í‘œ ë°ì´í„°ëŠ” DBì— ì €ì¥, í‘œì‹œëŠ” Phase 2

âŒ **ì‚¬ìš©ì ì¸ì¦/ê¶Œí•œ ê´€ë¦¬**
- ì´ìœ : MVPì—ì„œëŠ” ë¶ˆí•„ìš”
- ê³„íš: Phase 3ì—ì„œ Supabase Auth ì¶”ê°€

âŒ **ì‹¤ì‹œê°„ ë°ì´í„° ì—…ë°ì´íŠ¸**
- ì´ìœ : ì›” 1íšŒ ì—…ë°ì´íŠ¸ë©´ ì¶©ë¶„
- ê³„íš: Phase 2ì—ì„œ ìˆ˜ë™ ì—…ë¡œë“œ ê¸°ëŠ¥

---

## 3. ê¸°ìˆ  ì‚¬ì–‘

### 3.1 Technology Stack

| Layer | Technology | Version | ì„ íƒ ì´ìœ  |
|-------|-----------|---------|----------|
| **Framework** | Next.js | 15.x | React SSR/SSG, API Routes |
| **Language** | TypeScript | 5.x | íƒ€ì… ì•ˆì „ì„±, ê°œë°œ ìƒì‚°ì„± |
| **UI Library** | shadcn/ui | Latest | ê³ í’ˆì§ˆ ì»´í¬ë„ŒíŠ¸, Tailwind í†µí•© |
| **Styling** | Tailwind CSS | 3.x | ë¹ ë¥¸ ìŠ¤íƒ€ì¼ë§, ì¼ê´€ì„± |
| **Database** | Supabase | - | PostgreSQL + Auth + Storage |
| **Charts** | Recharts | 2.x | React ë„¤ì´í‹°ë¸Œ, ì»¤ìŠ¤í„°ë§ˆì´ì§• ìš©ì´ |
| **Maps** | react-simple-maps | 3.x | ê°€ë³ê³  ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥ |
| **Date** | date-fns | 3.x | ë‚ ì§œ í¬ë§·íŒ… |
| **Tooltip** | react-tooltip | 5.x | ê°„ë‹¨í•œ tooltip êµ¬í˜„ |
| **AI Tool** | Cursor | - | AI ê¸°ë°˜ ì½”ë“œ ìƒì„± |
| **Hosting** | Vercel | - | Next.js ìµœì í™”, ë¬´ë£Œ tier |

### 3.2 í”„ë¡œì íŠ¸ êµ¬ì¡°

```
subsidiary-dashboard/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.tsx              # Root layout
â”‚   â”œâ”€â”€ page.tsx                # ë©”ì¸ ëŒ€ì‹œë³´ë“œ
â”‚   â”œâ”€â”€ globals.css             # Global styles
â”‚   â””â”€â”€ api/                    # API routes (Phase 2)
â”‚       â””â”€â”€ upload/
â”‚           â””â”€â”€ route.ts
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                     # shadcn/ui components
â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”œâ”€â”€ card.tsx
â”‚   â”‚   â”œâ”€â”€ skeleton.tsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”œâ”€â”€ WorldMap.tsx        # ì„¸ê³„ì§€ë„ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ SubsidiaryCard.tsx  # ë²•ì¸ ì •ë³´ ì¹´ë“œ
â”‚   â”‚   â”œâ”€â”€ FinancialChart.tsx  # ì¬ë¬´ ì°¨íŠ¸
â”‚   â”‚   â””â”€â”€ Header.tsx          # ëŒ€ì‹œë³´ë“œ í—¤ë”
â”‚   â””â”€â”€ layout/
â”‚       â””â”€â”€ DashboardLayout.tsx # ë ˆì´ì•„ì›ƒ ë˜í¼
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase/
â”‚   â”‚   â”œâ”€â”€ client.ts           # Supabase í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â””â”€â”€ types.ts            # Database types
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ financialService.ts # ì¬ë¬´ ë°ì´í„° service
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ format.ts           # í¬ë§·íŒ… í•¨ìˆ˜
â”‚   â”‚   â””â”€â”€ colors.ts           # ìƒ‰ìƒ ìœ í‹¸
â”‚   â””â”€â”€ constants/
â”‚       â””â”€â”€ regions.ts          # ì§€ì—­ ìƒìˆ˜
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts                # Global types
â”œâ”€â”€ public/
â”‚   â””â”€â”€ world-map.json          # ì§€ë„ ë°ì´í„° (optional)
â”œâ”€â”€ .env.local                  # í™˜ê²½ ë³€ìˆ˜
â”œâ”€â”€ .env.example                # í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ
â”œâ”€â”€ next.config.js
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ tsconfig.json
â””â”€â”€ package.json
```

### 3.3 í•µì‹¬ Dependencies

```json
{
  "dependencies": {
    "next": "^15.0.0",
    "react": "^19.0.0",
    "react-dom": "^19.0.0",
    "typescript": "^5.0.0",
    "@supabase/supabase-js": "^2.39.0",
    "recharts": "^2.10.0",
    "react-simple-maps": "^3.0.0",
    "date-fns": "^3.0.0",
    "react-tooltip": "^5.25.0",
    "clsx": "^2.1.0",
    "tailwind-merge": "^2.2.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "@types/react": "^18.0.0",
    "@types/react-dom": "^18.0.0",
    "autoprefixer": "^10.0.0",
    "postcss": "^8.0.0",
    "tailwindcss": "^3.4.0",
    "eslint": "^8.0.0",
    "eslint-config-next": "^15.0.0"
  }
}
```

---

## 4. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### 4.1 Schema Overview

```
subsidiaries (ë²•ì¸ ì •ë³´)
â”œâ”€â”€ id (UUID, PK)
â”œâ”€â”€ name (TEXT)
â”œâ”€â”€ code (TEXT, UNIQUE)
â”œâ”€â”€ country (TEXT)
â”œâ”€â”€ city (TEXT)
â”œâ”€â”€ latitude (DECIMAL)
â”œâ”€â”€ longitude (DECIMAL)
â”œâ”€â”€ region (TEXT)
â””â”€â”€ created_at (TIMESTAMP)

financial_data (ì¬ë¬´ ë°ì´í„°)
â”œâ”€â”€ id (UUID, PK)
â”œâ”€â”€ subsidiary_id (UUID, FK â†’ subsidiaries)
â”œâ”€â”€ fiscal_year (INTEGER)
â”œâ”€â”€ quarter (INTEGER)
â”œâ”€â”€ revenue_krw (BIGINT)
â”œâ”€â”€ operating_profit_krw (BIGINT)
â”œâ”€â”€ target_revenue_krw (BIGINT, nullable)
â”œâ”€â”€ created_at (TIMESTAMP)
â”œâ”€â”€ updated_at (TIMESTAMP)
â””â”€â”€ UNIQUE(subsidiary_id, fiscal_year, quarter)
```

### 4.2 Supabase SQL Scripts

#### 4.2.1 í…Œì´ë¸” ìƒì„±

```sql
-- ============================================
-- 1. subsidiaries í…Œì´ë¸” ìƒì„±
-- ============================================
CREATE TABLE subsidiaries (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  name TEXT NOT NULL,
  code TEXT NOT NULL UNIQUE,
  country TEXT NOT NULL,
  city TEXT NOT NULL,
  latitude DECIMAL(10, 8) NOT NULL,
  longitude DECIMAL(11, 8) NOT NULL,
  region TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ì¸ë±ìŠ¤ ìƒì„±
CREATE INDEX idx_subsidiaries_code ON subsidiaries(code);
CREATE INDEX idx_subsidiaries_region ON subsidiaries(region);

-- ì½”ë©˜íŠ¸ ì¶”ê°€
COMMENT ON TABLE subsidiaries IS 'í•´ì™¸ë²•ì¸ ê¸°ë³¸ ì •ë³´';
COMMENT ON COLUMN subsidiaries.code IS 'ë²•ì¸ ì½”ë“œ (ì˜ˆ: USA, JPN)';
COMMENT ON COLUMN subsidiaries.region IS 'Americas, Europe, Asia-Pacific';

-- ============================================
-- 2. financial_data í…Œì´ë¸” ìƒì„±
-- ============================================
CREATE TABLE financial_data (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  subsidiary_id UUID NOT NULL REFERENCES subsidiaries(id) ON DELETE CASCADE,
  fiscal_year INTEGER NOT NULL CHECK (fiscal_year >= 2020 AND fiscal_year <= 2100),
  quarter INTEGER NOT NULL CHECK (quarter >= 1 AND quarter <= 4),
  revenue_krw BIGINT NOT NULL CHECK (revenue_krw >= 0),
  operating_profit_krw BIGINT,
  target_revenue_krw BIGINT CHECK (target_revenue_krw >= 0),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(subsidiary_id, fiscal_year, quarter)
);

-- ì¸ë±ìŠ¤ ìƒì„±
CREATE INDEX idx_financial_subsidiary ON financial_data(subsidiary_id);
CREATE INDEX idx_financial_year_quarter ON financial_data(fiscal_year DESC, quarter DESC);
CREATE INDEX idx_financial_updated ON financial_data(updated_at DESC);

-- ìë™ updated_at íŠ¸ë¦¬ê±°
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER update_financial_data_updated_at
    BEFORE UPDATE ON financial_data
    FOR EACH ROW
    EXECUTE FUNCTION update_updated_at_column();

-- ì½”ë©˜íŠ¸ ì¶”ê°€
COMMENT ON TABLE financial_data IS 'ë²•ì¸ë³„ ë¶„ê¸° ì¬ë¬´ ë°ì´í„°';
COMMENT ON COLUMN financial_data.revenue_krw IS 'ë§¤ì¶œì•¡ (ì›í™”, ì› ë‹¨ìœ„)';
COMMENT ON COLUMN financial_data.operating_profit_krw IS 'ì˜ì—…ì´ìµ (ì›í™”, ì› ë‹¨ìœ„)';
```

#### 4.2.2 ë²•ì¸ ë°ì´í„° ì…ë ¥

```sql
-- ============================================
-- 3. 14ê°œ í•´ì™¸ë²•ì¸ ë°ì´í„° ì…ë ¥
-- ============================================
INSERT INTO subsidiaries (name, code, country, city, latitude, longitude, region) VALUES
-- Americas (4ê°œ)
('InBody USA', 'USA', 'USA', 'LA', 34.0522, -118.2437, 'Americas'),
('InBody BWA', 'BWA', 'BWA', 'New York', 40.7128, -74.0060, 'Americas'),
('InBody Mexico', 'MEX', 'Mexico', 'Mexico City', 19.4326, -99.1332, 'Americas'),
('InBody Oceania', 'AUS', 'Australia', 'Gold Coast', -28.0167, 153.4000, 'Asia-Pacific'),

-- Europe (2ê°œ)
('InBody Europe', 'NLD', 'Netherlands', 'Amsterdam', 52.3676, 4.9041, 'Europe'),
('InBody Turkey', 'TUR', 'Turkey', 'Istanbul', 41.0082, 28.9784, 'Europe'),

-- Asia-Pacific (8ê°œ)
('InBody Japan', 'JPN', 'Japan', 'Tokyo', 35.6762, 139.6503, 'Asia-Pacific'),
('InBody China', 'CHN', 'China', 'Shanghai', 31.2304, 121.4737, 'Asia-Pacific'),
('InBody India', 'IND', 'India', 'Mumbai', 19.0760, 72.8777, 'Asia-Pacific'),
('InBody Asia', 'MYS', 'Malaysia', 'Kuala Lumpur', 3.1390, 101.6869, 'Asia-Pacific'),
('InBody Vietnam', 'VNM', 'Vietnam', 'Ho Chi Minh', 10.8231, 106.6297, 'Asia-Pacific');

-- ì…ë ¥ í™•ì¸
SELECT name, code, country, city, region FROM subsidiaries ORDER BY region, name;
```

#### 4.2.3 ìƒ˜í”Œ ì¬ë¬´ ë°ì´í„° ì…ë ¥

```sql
-- ============================================
-- 4. ìƒ˜í”Œ ì¬ë¬´ ë°ì´í„° ì…ë ¥ (2024 Q3, Q4)
-- ============================================

-- Helper: ë²•ì¸ ID ì¡°íšŒ í•¨ìˆ˜
CREATE OR REPLACE FUNCTION get_subsidiary_id(sub_code TEXT)
RETURNS UUID AS $$
BEGIN
  RETURN (SELECT id FROM subsidiaries WHERE code = sub_code);
END;
$$ LANGUAGE plpgsql;

-- InBody USA (í° ê·œëª¨)
INSERT INTO financial_data (subsidiary_id, fiscal_year, quarter, revenue_krw, operating_profit_krw, target_revenue_krw)
VALUES
(get_subsidiary_id('USA'), 2024, 3, 50000000000, 5000000000, 48000000000),
(get_subsidiary_id('USA'), 2024, 4, 55000000000, 6000000000, 52000000000),
(get_subsidiary_id('USA'), 2024, 2, 48000000000, 4800000000, 46000000000),
(get_subsidiary_id('USA'), 2024, 1, 45000000000, 4500000000, 44000000000);

-- InBody Japan (ì¤‘ê°„ ê·œëª¨)
INSERT INTO financial_data (subsidiary_id, fiscal_year, quarter, revenue_krw, operating_profit_krw, target_revenue_krw)
VALUES
(get_subsidiary_id('JPN'), 2024, 3, 30000000000, 3000000000, 32000000000),
(get_subsidiary_id('JPN'), 2024, 4, 32000000000, 3500000000, 34000000000),
(get_subsidiary_id('JPN'), 2024, 2, 29000000000, 2900000000, 30000000000),
(get_subsidiary_id('JPN'), 2024, 1, 28000000000, 2800000000, 29000000000);

-- InBody China (ì„±ì¥ ì¤‘)
INSERT INTO financial_data (subsidiary_id, fiscal_year, quarter, revenue_krw, operating_profit_krw, target_revenue_krw)
VALUES
(get_subsidiary_id('CHN'), 2024, 3, 25000000000, 2000000000, 24000000000),
(get_subsidiary_id('CHN'), 2024, 4, 28000000000, 2500000000, 26000000000),
(get_subsidiary_id('CHN'), 2024, 2, 23000000000, 1800000000, 22000000000),
(get_subsidiary_id('CHN'), 2024, 1, 20000000000, 1600000000, 21000000000);

-- InBody Europe
INSERT INTO financial_data (subsidiary_id, fiscal_year, quarter, revenue_krw, operating_profit_krw, target_revenue_krw)
VALUES
(get_subsidiary_id('NLD'), 2024, 3, 18000000000, 1800000000, 17000000000),
(get_subsidiary_id('NLD'), 2024, 4, 20000000000, 2100000000, 19000000000),
(get_subsidiary_id('NLD'), 2024, 2, 17000000000, 1700000000, 16000000000),
(get_subsidiary_id('NLD'), 2024, 1, 16000000000, 1600000000, 15500000000);

-- InBody India (ì‘ì€ ê·œëª¨, ê³ ì„±ì¥)
INSERT INTO financial_data (subsidiary_id, fiscal_year, quarter, revenue_krw, operating_profit_krw, target_revenue_krw)
VALUES
(get_subsidiary_id('IND'), 2024, 3, 8000000000, 600000000, 7500000000),
(get_subsidiary_id('IND'), 2024, 4, 10000000000, 900000000, 9000000000),
(get_subsidiary_id('IND'), 2024, 2, 7000000000, 500000000, 7000000000),
(get_subsidiary_id('IND'), 2024, 1, 6000000000, 400000000, 6500000000);

-- ë‚˜ë¨¸ì§€ ë²•ì¸ë“¤ (ê°„ë‹¨í•˜ê²Œ)
INSERT INTO financial_data (subsidiary_id, fiscal_year, quarter, revenue_krw, operating_profit_krw, target_revenue_krw)
SELECT 
  get_subsidiary_id(code),
  2024,
  4,
  CASE 
    WHEN code = 'MEX' THEN 12000000000
    WHEN code = 'TUR' THEN 9000000000
    WHEN code = 'VNM' THEN 7000000000
    WHEN code = 'MYS' THEN 11000000000
    WHEN code = 'AUS' THEN 15000000000
    WHEN code = 'BWA' THEN 8000000000
  END as revenue,
  CASE 
    WHEN code = 'MEX' THEN 1200000000
    WHEN code = 'TUR' THEN 900000000
    WHEN code = 'VNM' THEN 600000000
    WHEN code = 'MYS' THEN 1100000000
    WHEN code = 'AUS' THEN 1500000000
    WHEN code = 'BWA' THEN 700000000
  END as profit,
  NULL as target
FROM subsidiaries
WHERE code IN ('MEX', 'TUR', 'VNM', 'MYS', 'AUS', 'BWA');

-- ì…ë ¥ ê²°ê³¼ í™•ì¸
SELECT 
  s.name,
  fd.fiscal_year,
  fd.quarter,
  fd.revenue_krw / 100000000 as revenue_billion,
  fd.operating_profit_krw / 100000000 as profit_billion,
  ROUND((fd.operating_profit_krw::NUMERIC / fd.revenue_krw * 100), 1) as margin_pct
FROM financial_data fd
JOIN subsidiaries s ON fd.subsidiary_id = s.id
ORDER BY fd.fiscal_year DESC, fd.quarter DESC, s.name;
```

#### 4.2.4 ìœ ìš©í•œ ì¡°íšŒ ì¿¼ë¦¬

```sql
-- ============================================
-- 5. ê°œë°œ/í…ŒìŠ¤íŠ¸ìš© ì¡°íšŒ ì¿¼ë¦¬
-- ============================================

-- ìµœê·¼ ë¶„ê¸° ì‹¤ì  (ëª¨ë“  ë²•ì¸)
SELECT 
  s.name,
  s.region,
  fd.fiscal_year || ' Q' || fd.quarter as period,
  fd.revenue_krw / 100000000 as revenue_ì–µì›,
  fd.operating_profit_krw / 100000000 as profit_ì–µì›,
  ROUND((fd.operating_profit_krw::NUMERIC / fd.revenue_krw * 100), 1) as margin
FROM financial_data fd
JOIN subsidiaries s ON fd.subsidiary_id = s.id
WHERE (fd.fiscal_year, fd.quarter) = (
  SELECT fiscal_year, quarter 
  FROM financial_data 
  ORDER BY fiscal_year DESC, quarter DESC 
  LIMIT 1
)
ORDER BY fd.revenue_krw DESC;

-- íŠ¹ì • ë²•ì¸ì˜ 4ë¶„ê¸° ì¶”ì´
SELECT 
  fd.fiscal_year || ' Q' || fd.quarter as period,
  fd.revenue_krw / 100000000 as revenue
FROM financial_data fd
JOIN subsidiaries s ON fd.subsidiary_id = s.id
WHERE s.code = 'USA'
ORDER BY fd.fiscal_year DESC, fd.quarter DESC
LIMIT 4;

-- ì§€ì—­ë³„ í•©ê³„
SELECT 
  s.region,
  COUNT(DISTINCT s.id) as subsidiaries_count,
  SUM(fd.revenue_krw) / 100000000 as total_revenue_ì–µì›
FROM subsidiaries s
LEFT JOIN financial_data fd ON s.id = fd.subsidiary_id
WHERE fd.fiscal_year = 2024 AND fd.quarter = 4
GROUP BY s.region
ORDER BY total_revenue_ì–µì› DESC;
```

### 4.3 TypeScript Types

```typescript
// lib/supabase/types.ts
export interface Subsidiary {
  id: string;
  name: string;
  code: string;
  country: string;
  city: string;
  latitude: number;
  longitude: number;
  region: 'Americas' | 'Europe' | 'Asia-Pacific';
  created_at: string;
}

export interface FinancialData {
  id: string;
  subsidiary_id: string;
  fiscal_year: number;
  quarter: number;
  revenue_krw: number;
  operating_profit_krw: number | null;
  target_revenue_krw: number | null;
  created_at: string;
  updated_at: string;
}

export interface FinancialDataWithSubsidiary extends FinancialData {
  subsidiaries: Subsidiary;
}

// View Models (UIìš©)
export interface SubsidiaryCardData {
  subsidiary: Subsidiary;
  latestFinancial: {
    period: string;           // "2024 Q4"
    revenue: number;          // ì–µì› ë‹¨ìœ„ (550)
    operatingProfit: number;  // ì–µì› ë‹¨ìœ„ (60)
    operatingMargin: number;  // % (10.9)
    lastUpdated: Date;
  };
}

export interface ChartDataPoint {
  quarter: string;    // "2024 Q1"
  revenue: number;    // ì–µì› ë‹¨ìœ„ (450)
  profit: number;     // ì–µì› ë‹¨ìœ„ (45)
}
```

---

## 5. Cursor AI ê°œë°œ ê°€ì´ë“œ

### 5.0 ì‚¬ì „ ì¤€ë¹„ ì²´í¬ë¦¬ìŠ¤íŠ¸

#### âœ… í™˜ê²½ ì„¸íŒ… ì™„ë£Œ í™•ì¸
- [ ] Node.js 18+ ì„¤ì¹˜ í™•ì¸: `node --version`
- [ ] Cursor ìµœì‹  ë²„ì „ ì„¤ì¹˜
- [ ] Git ì„¤ì¹˜ ë° ì„¤ì •
- [ ] Supabase ê³„ì • ìƒì„±

---

### 5.1 í”„ë¡œì íŠ¸ ì´ˆê¸°í™” (30ë¶„)

#### Step 1-1: Next.js í”„ë¡œì íŠ¸ ìƒì„±

**Terminal ì‹¤í–‰:**
```bash
# í”„ë¡œì íŠ¸ ìƒì„±
npx create-next-app@latest subsidiary-dashboard \
  --typescript \
  --tailwind \
  --app \
  --eslint \
  --no-src-dir

# í”„ë¡œì íŠ¸ í´ë”ë¡œ ì´ë™
cd subsidiary-dashboard

# Git ì €ì¥ì†Œ ì´ˆê¸°í™”
git init
git add .
git commit -m "Initial commit: Next.js 15 + TypeScript + Tailwind"
```

**ì˜ˆìƒ ì¶œë ¥:**
```
âœ” Would you like to use TypeScript? â€¦ Yes
âœ” Would you like to use ESLint? â€¦ Yes
âœ” Would you like to use Tailwind CSS? â€¦ Yes
âœ” Would you like to use `src/` directory? â€¦ No
âœ” Would you like to use App Router? â€¦ Yes
âœ” Would you like to customize the default import alias? â€¦ No
```

#### Step 1-2: í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜

```bash
# Supabase í´ë¼ì´ì–¸íŠ¸
npm install @supabase/supabase-js

# ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬
npm install recharts

# ì§€ë„ ë¼ì´ë¸ŒëŸ¬ë¦¬
npm install react-simple-maps

# ìœ í‹¸ë¦¬í‹°
npm install date-fns clsx tailwind-merge

# Tooltip (ì„ íƒ)
npm install react-tooltip

# íƒ€ì… ì •ì˜
npm install -D @types/react-simple-maps
```

#### Step 1-3: shadcn/ui ì„¤ì¹˜

```bash
# shadcn/ui ì´ˆê¸°í™”
npx shadcn@latest init

# í”„ë¡¬í”„íŠ¸ ì‘ë‹µ
âœ” Which style would you like to use? â€º Default
âœ” Which color would you like to use as base color? â€º Slate
âœ” Would you like to use CSS variables for colors? â€º yes

# í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ ì„¤ì¹˜
npx shadcn@latest add card
npx shadcn@latest add button
npx shadcn@latest add skeleton
npx shadcn@latest add dialog
npx shadcn@latest add badge
npx shadcn@latest add separator
```

#### Step 1-4: í”„ë¡œì íŠ¸ êµ¬ì¡° ìƒì„±

```bash
# í´ë” ìƒì„±
mkdir -p lib/supabase lib/services lib/utils lib/constants
mkdir -p components/dashboard components/layout
mkdir -p types

# ê¸°ë³¸ íŒŒì¼ ìƒì„±
touch lib/supabase/client.ts
touch lib/supabase/types.ts
touch lib/services/financialService.ts
touch lib/utils/format.ts
touch lib/constants/regions.ts
touch types/index.ts
touch components/dashboard/WorldMap.tsx
touch components/dashboard/SubsidiaryCard.tsx
touch components/dashboard/FinancialChart.tsx
touch components/layout/DashboardLayout.tsx

# .env íŒŒì¼ ìƒì„±
touch .env.local
touch .env.example
```

#### Step 1-5: Cursor AI í”„ë¡¬í”„íŠ¸

**Cursorì—ì„œ ì‹¤í–‰ (Cmd/Ctrl + K):**

```
í”„ë¡œì íŠ¸ ê¸°ë³¸ êµ¬ì¡°ë¥¼ ì„¤ì •í•´ì¤˜:

1. lib/utils/cn.tsë¥¼ ë§Œë“¤ì–´ì„œ clsx + tailwind-merge í†µí•©
2. lib/constants/regions.tsì— ì§€ì—­ë³„ ìƒ‰ìƒ ìƒìˆ˜ ì •ì˜
3. types/index.tsì— ê¸°ë³¸ íƒ€ì… export (Subsidiary, FinancialData)
4. .env.example íŒŒì¼ ì‘ì„± (Supabase URL, Key)

ì½”ë“œë¥¼ ìƒì„±í•  ë•Œ:
- TypeScript strict mode ì‚¬ìš©
- ESLint ê·œì¹™ ì¤€ìˆ˜
- ì£¼ì„ í¬í•¨ (í•œêµ­ì–´)
```

**ì˜ˆìƒ ìƒì„± íŒŒì¼ë“¤:**

```typescript
// lib/utils/cn.ts
import { clsx, type ClassValue } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}

// lib/constants/regions.ts
export const REGIONS = {
  AMERICAS: 'Americas',
  EUROPE: 'Europe',
  ASIA_PACIFIC: 'Asia-Pacific',
} as const;

export const REGION_COLORS = {
  [REGIONS.AMERICAS]: '#3B82F6',
  [REGIONS.EUROPE]: '#10B981',
  [REGIONS.ASIA_PACIFIC]: '#F59E0B',
} as const;

// .env.example
NEXT_PUBLIC_SUPABASE_URL=your-project-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
```

---

### 5.2 Supabase ì—°ë™ (1ì‹œê°„)

#### Step 2-1: Supabase í”„ë¡œì íŠ¸ ìƒì„±

1. https://supabase.com/dashboard ì ‘ì†
2. "New project" í´ë¦­
3. í”„ë¡œì íŠ¸ ì •ë³´ ì…ë ¥:
   - Name: `inbody-subsidiary-dashboard`
   - Database Password: (ê°•ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ ìƒì„±)
   - Region: Northeast Asia (Seoul)
4. "Create new project" í´ë¦­ (2-3ë¶„ ì†Œìš”)

#### Step 2-2: API Keys ë³µì‚¬

1. Project Settings â†’ API â†’ Project URL ë³µì‚¬
2. Project Settings â†’ API â†’ `anon` `public` key ë³µì‚¬
3. `.env.local` íŒŒì¼ì— ì¶”ê°€:

```bash
NEXT_PUBLIC_SUPABASE_URL=https://xxxxxxxxxxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

#### Step 2-3: ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ìƒì„±

**Supabase Dashboard â†’ SQL Editor â†’ New query:**

```sql
-- ìœ„ì˜ "4.2.1 í…Œì´ë¸” ìƒì„±" SQL ì „ì²´ ë³µì‚¬ & ì‹¤í–‰
```

**ì‹¤í–‰ í›„ í™•ì¸:**
- Table Editorì—ì„œ `subsidiaries`, `financial_data` í…Œì´ë¸” ìƒì„± í™•ì¸

#### Step 2-4: Cursor AIë¡œ Supabase í´ë¼ì´ì–¸íŠ¸ ìƒì„±

**Cursor Prompt:**

```
lib/supabase/client.tsë¥¼ ë§Œë“¤ì–´ì¤˜:

ìš”êµ¬ì‚¬í•­:
1. createClientë¡œ Supabase í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
2. í™˜ê²½ ë³€ìˆ˜ ê²€ì¦ (.env.local ëˆ„ë½ ì‹œ ì—ëŸ¬)
3. íƒ€ì… ì•ˆì „ì„±ì„ ìœ„í•œ Database íƒ€ì… ì •ì˜
4. singleton íŒ¨í„´ ì ìš©

ê·¸ë¦¬ê³  lib/supabase/types.tsì— ë‹¤ìŒ íƒ€ì…ë“¤ì„ ì •ì˜í•´ì¤˜:
- Subsidiary (id, name, code, country, city, latitude, longitude, region, created_at)
- FinancialData (ëª¨ë“  financial_data ì»¬ëŸ¼)
- FinancialDataWithSubsidiary (join ê²°ê³¼ìš©)
```

**ìƒì„±ëœ íŒŒì¼ ì˜ˆì‹œ:**

```typescript
// lib/supabase/client.ts
import { createClient } from '@supabase/supabase-js';
import type { Database } from './types';

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;

if (!supabaseUrl || !supabaseAnonKey) {
  throw new Error('Supabase í™˜ê²½ ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. .env.local íŒŒì¼ì„ í™•ì¸í•˜ì„¸ìš”.');
}

export const supabase = createClient<Database>(supabaseUrl, supabaseAnonKey);

// lib/supabase/types.ts
export interface Subsidiary {
  id: string;
  name: string;
  code: string;
  country: string;
  city: string;
  latitude: number;
  longitude: number;
  region: 'Americas' | 'Europe' | 'Asia-Pacific';
  created_at: string;
}

export interface FinancialData {
  id: string;
  subsidiary_id: string;
  fiscal_year: number;
  quarter: number;
  revenue_krw: number;
  operating_profit_krw: number | null;
  target_revenue_krw: number | null;
  created_at: string;
  updated_at: string;
}

export interface FinancialDataWithSubsidiary extends FinancialData {
  subsidiaries: Subsidiary;
}

export interface Database {
  public: {
    Tables: {
      subsidiaries: {
        Row: Subsidiary;
      };
      financial_data: {
        Row: FinancialData;
      };
    };
  };
}
```

#### Step 2-5: ìƒ˜í”Œ ë°ì´í„° ì…ë ¥

**Supabase SQL Editor:**

```sql
-- ìœ„ì˜ "4.2.2 ë²•ì¸ ë°ì´í„° ì…ë ¥" SQL ì‹¤í–‰
-- ìœ„ì˜ "4.2.3 ìƒ˜í”Œ ì¬ë¬´ ë°ì´í„° ì…ë ¥" SQL ì‹¤í–‰
```

**ë°ì´í„° ì…ë ¥ í™•ì¸:**
```sql
SELECT COUNT(*) FROM subsidiaries;  -- 11ê°œ (êµ­ë‚´ ì œì™¸)
SELECT COUNT(*) FROM financial_data; -- ì•½ 20-30ê°œ
```

#### Step 2-6: ì—°ê²° í…ŒìŠ¤íŠ¸

**app/page.tsxë¥¼ ì„ì‹œë¡œ ìˆ˜ì •:**

```typescript
// app/page.tsx
import { supabase } from '@/lib/supabase/client';

export default async function Home() {
  const { data, error } = await supabase
    .from('subsidiaries')
    .select('*')
    .limit(5);

  if (error) {
    return <div>Error: {error.message}</div>;
  }

  return (
    <div className="p-8">
      <h1 className="text-2xl font-bold mb-4">Supabase ì—°ê²° í…ŒìŠ¤íŠ¸</h1>
      <pre>{JSON.stringify(data, null, 2)}</pre>
    </div>
  );
}
```

**ë¸Œë¼ìš°ì € í™•ì¸:**
```bash
npm run dev
# http://localhost:3000 ì ‘ì†
# ë²•ì¸ ë°ì´í„°ê°€ JSONìœ¼ë¡œ í‘œì‹œë˜ë©´ ì„±ê³µ!
```

---

### 5.3 ì„¸ê³„ì§€ë„ êµ¬í˜„ (2-3ì‹œê°„)

#### Step 3-1: ì§€ë„ ì»´í¬ë„ŒíŠ¸ ìƒì„±

**Cursor Prompt:**

```
components/dashboard/WorldMap.tsxë¥¼ ë§Œë“¤ì–´ì¤˜:

ìš”êµ¬ì‚¬í•­:
1. react-simple-maps ì‚¬ìš©
2. ComposableMap + Geographiesë¡œ ì„¸ê³„ì§€ë„ ë Œë”ë§
3. Marker ì»´í¬ë„ŒíŠ¸ë¡œ ë²•ì¸ ìœ„ì¹˜ í‘œì‹œ
   - ì›í˜• ë§ˆì»¤ (radius: 8)
   - ì§€ì—­ë³„ ìƒ‰ìƒ (REGION_COLORS ì‚¬ìš©)
   - hover ì‹œ í¬ê¸° í™•ëŒ€ (scale: 1.2)
   - ì„ íƒëœ ë§ˆì»¤ëŠ” stroke ê°•ì¡°
4. í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ë§

Props:
- subsidiaries: Subsidiary[]
- selectedId?: string | null
- onSubsidiaryClick: (id: string) => void

ìŠ¤íƒ€ì¼:
- ì§€ë„ ë°°ê²½: #f3f4f6
- êµ­ê°€ ê²½ê³„ì„ : #d1d5db
- ë§ˆì»¤ì— transition íš¨ê³¼

ì§€ë„ ë°ì´í„°ëŠ” ë‹¤ìŒ URL ì‚¬ìš©:
https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json
```

**ìƒì„±ëœ ì½”ë“œ ì˜ˆì‹œ:**

```typescript
// components/dashboard/WorldMap.tsx
'use client';

import { ComposableMap, Geographies, Geography, Marker } from 'react-simple-maps';
import { Subsidiary } from '@/lib/supabase/types';
import { REGION_COLORS } from '@/lib/constants/regions';

const geoUrl = 'https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json';

interface WorldMapProps {
  subsidiaries: Subsidiary[];
  selectedId?: string | null;
  onSubsidiaryClick: (id: string) => void;
}

export function WorldMap({ subsidiaries, selectedId, onSubsidiaryClick }: WorldMapProps) {
  return (
    <div className="w-full h-full bg-gray-50 rounded-lg">
      <ComposableMap
        projection="geoMercator"
        projectionConfig={{
          scale: 140,
          center: [30, 20],
        }}
        className="w-full h-full"
      >
        <Geographies geography={geoUrl}>
          {({ geographies }) =>
            geographies.map((geo) => (
              <Geography
                key={geo.rsmKey}
                geography={geo}
                fill="#f9fafb"
                stroke="#d1d5db"
                strokeWidth={0.5}
              />
            ))
          }
        </Geographies>

        {subsidiaries.map((sub) => (
          <Marker
            key={sub.id}
            coordinates={[sub.longitude, sub.latitude]}
            onClick={() => onSubsidiaryClick(sub.id)}
          >
            <circle
              r={selectedId === sub.id ? 10 : 8}
              fill={REGION_COLORS[sub.region]}
              stroke={selectedId === sub.id ? '#1f2937' : 'transparent'}
              strokeWidth={2}
              className="cursor-pointer transition-all duration-200 hover:scale-110"
              opacity={selectedId && selectedId !== sub.id ? 0.5 : 1}
            />
            <text
              textAnchor="middle"
              y={-15}
              className="text-xs font-medium fill-gray-700 pointer-events-none"
              opacity={selectedId === sub.id ? 1 : 0}
            >
              {sub.name}
            </text>
          </Marker>
        ))}
      </ComposableMap>
    </div>
  );
}
```

#### Step 3-2: í¬ë§·íŒ… ìœ í‹¸ë¦¬í‹° ìƒì„±

**Cursor Prompt:**

```
lib/utils/format.tsë¥¼ ë§Œë“¤ì–´ì¤˜:

í•¨ìˆ˜ë“¤:
1. formatKRW(amount: number): string
   - ì–µì› ë‹¨ìœ„ë¡œ ë³€í™˜ (ì˜ˆ: 50000000000 â†’ "500ì–µì›")
   - ì²œë‹¨ìœ„ ì½¤ë§ˆ í¬í•¨
   
2. formatMargin(margin: number): string
   - ì†Œìˆ˜ì  1ìë¦¬ (ì˜ˆ: 10.87 â†’ "10.9%")
   
3. formatPeriod(year: number, quarter: number): string
   - "YYYY QN" í˜•ì‹ (ì˜ˆ: 2024, 4 â†’ "2024 Q4")
   
4. formatDate(date: string | Date): string
   - date-fns ì‚¬ìš©
   - "YYYYë…„ MMì›” DDì¼" í˜•ì‹

ëª¨ë“  í•¨ìˆ˜ì— JSDoc ì£¼ì„ ì¶”ê°€
```

**ìƒì„±ëœ íŒŒì¼:**

```typescript
// lib/utils/format.ts
import { format } from 'date-fns';
import { ko } from 'date-fns/locale';

/**
 * ì›í™”ë¥¼ ì–µì› ë‹¨ìœ„ë¡œ í¬ë§·íŒ…
 * @example formatKRW(50000000000) // "500ì–µì›"
 */
export function formatKRW(amount: number): string {
  const billion = amount / 100000000;
  return `${billion.toLocaleString('ko-KR')}ì–µì›`;
}

/**
 * ì˜ì—…ì´ìµë¥ ì„ í¼ì„¼íŠ¸ë¡œ í¬ë§·íŒ…
 * @example formatMargin(10.87) // "10.9%"
 */
export function formatMargin(margin: number): string {
  return `${margin.toFixed(1)}%`;
}

/**
 * ì—°ë„ì™€ ë¶„ê¸°ë¥¼ "YYYY QN" í˜•ì‹ìœ¼ë¡œ í¬ë§·íŒ…
 * @example formatPeriod(2024, 4) // "2024 Q4"
 */
export function formatPeriod(year: number, quarter: number): string {
  return `${year} Q${quarter}`;
}

/**
 * ë‚ ì§œë¥¼ "YYYYë…„ MMì›” DDì¼" í˜•ì‹ìœ¼ë¡œ í¬ë§·íŒ…
 */
export function formatDate(date: string | Date): string {
  const dateObj = typeof date === 'string' ? new Date(date) : date;
  return format(dateObj, 'yyyyë…„ MMì›” ddì¼', { locale: ko });
}

/**
 * ì˜ì—…ì´ìµë¥  ê³„ì‚°
 */
export function calculateMargin(profit: number, revenue: number): number {
  if (revenue === 0) return 0;
  return (profit / revenue) * 100;
}
```

#### Step 3-3: ë©”ì¸ í˜ì´ì§€ êµ¬í˜„

**Cursor Prompt:**

```
app/page.tsxë¥¼ ë‹¤ì‹œ ì‘ì„±í•´ì¤˜:

ìš”êµ¬ì‚¬í•­:
1. Server Componentë¡œ Supabaseì—ì„œ subsidiaries ë°ì´í„° fetch
2. Client Componentì¸ DashboardClient ë Œë”ë§ (ë³„ë„ íŒŒì¼)

components/dashboard/DashboardClient.tsxë¥¼ ë§Œë“¤ì–´ì¤˜:
1. 'use client' ì§€ì‹œì–´
2. useStateë¡œ selectedSubsidiaryId ê´€ë¦¬
3. WorldMap ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
4. ë ˆì´ì•„ì›ƒ: 
   - í—¤ë” (ì œëª©, ì—…ë°ì´íŠ¸ ì‹œê°„)
   - ë©”ì¸: WorldMap (ì„ íƒ ì•ˆ ëì„ ë•Œ ì „ì²´ í™”ë©´)
5. ë¡œë”©/ì—ëŸ¬ ìƒíƒœ ì²˜ë¦¬

ìŠ¤íƒ€ì¼:
- í—¤ë”: h-16, bg-white, border-b
- ë©”ì¸: flex-1, bg-gray-50
```

**ìƒì„±ëœ íŒŒì¼ë“¤:**

```typescript
// app/page.tsx
import { supabase } from '@/lib/supabase/client';
import { DashboardClient } from '@/components/dashboard/DashboardClient';

export default async function HomePage() {
  const { data: subsidiaries, error } = await supabase
    .from('subsidiaries')
    .select('*')
    .order('name');

  if (error) {
    return (
      <div className="flex items-center justify-center min-h-screen">
        <div className="text-center">
          <h2 className="text-2xl font-bold text-red-600 mb-2">ë°ì´í„° ë¡œë”© ì‹¤íŒ¨</h2>
          <p className="text-gray-600">{error.message}</p>
        </div>
      </div>
    );
  }

  return <DashboardClient subsidiaries={subsidiaries || []} />;
}

// components/dashboard/DashboardClient.tsx
'use client';

import { useState } from 'react';
import { Subsidiary } from '@/lib/supabase/types';
import { WorldMap } from './WorldMap';
import { formatDate } from '@/lib/utils/format';

interface DashboardClientProps {
  subsidiaries: Subsidiary[];
}

export function DashboardClient({ subsidiaries }: DashboardClientProps) {
  const [selectedSubsidiaryId, setSelectedSubsidiaryId] = useState<string | null>(null);

  return (
    <div className="flex flex-col h-screen">
      {/* Header */}
      <header className="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6">
        <h1 className="text-xl font-bold text-gray-900">
          InBody í•´ì™¸ë²•ì¸ ëŒ€ì‹œë³´ë“œ
        </h1>
        <div className="text-sm text-gray-500">
          ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: {formatDate(new Date())}
        </div>
      </header>

      {/* Main Content */}
      <main className="flex-1 bg-gray-50 p-6">
        <div className="h-full max-w-7xl mx-auto">
          <WorldMap
            subsidiaries={subsidiaries}
            selectedId={selectedSubsidiaryId}
            onSubsidiaryClick={setSelectedSubsidiaryId}
          />
        </div>
      </main>
    </div>
  );
}
```

#### Step 3-4: í…ŒìŠ¤íŠ¸

```bash
npm run dev
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] ì§€ë„ê°€ ë Œë”ë§ë¨
- [ ] 11ê°œ ë²•ì¸ ë§ˆì»¤ê°€ ì˜¬ë°”ë¥¸ ìœ„ì¹˜ì— í‘œì‹œ
- [ ] ë§ˆì»¤ hover ì‹œ í¬ê¸° í™•ëŒ€
- [ ] ë§ˆì»¤ í´ë¦­ ì‹œ ì„ íƒ ìƒíƒœ ë³€ê²½
- [ ] ì½˜ì†”ì— ì—ëŸ¬ ì—†ìŒ

---

### 5.4 ë²•ì¸ ì •ë³´ ì¹´ë“œ êµ¬í˜„ (2ì‹œê°„)

#### Step 4-1: Financial Service ìƒì„±

**Cursor Prompt:**

```
lib/services/financialService.tsë¥¼ ë§Œë“¤ì–´ì¤˜:

í•¨ìˆ˜ 2ê°œ:

1. getLatestFinancialData(subsidiaryId: string)
   - í•´ë‹¹ ë²•ì¸ì˜ ê°€ì¥ ìµœê·¼ ë¶„ê¸° ë°ì´í„° 1ê°œ ë°˜í™˜
   - subsidiary ì •ë³´ë„ join
   - ë°˜í™˜ íƒ€ì…: FinancialDataWithSubsidiary | null

2. getFinancialTrend(subsidiaryId: string, quarters: number = 4)
   - ìµœê·¼ Në¶„ê¸° ë°ì´í„° ë°˜í™˜ (ë‚´ë¦¼ì°¨ìˆœ)
   - ë°˜í™˜ íƒ€ì…: FinancialData[]

ì—ëŸ¬ ì²˜ë¦¬:
- try-catchë¡œ ê°ì‹¸ê¸°
- ì—ëŸ¬ ë°œìƒ ì‹œ console.error + null/ë¹ˆë°°ì—´ ë°˜í™˜
```

**ìƒì„±ëœ íŒŒì¼:**

```typescript
// lib/services/financialService.ts
import { supabase } from '@/lib/supabase/client';
import type { FinancialData, FinancialDataWithSubsidiary } from '@/lib/supabase/types';

/**
 * íŠ¹ì • ë²•ì¸ì˜ ìµœì‹  ì¬ë¬´ ë°ì´í„° ì¡°íšŒ
 */
export async function getLatestFinancialData(
  subsidiaryId: string
): Promise<FinancialDataWithSubsidiary | null> {
  try {
    const { data, error } = await supabase
      .from('financial_data')
      .select(`
        *,
        subsidiaries (*)
      `)
      .eq('subsidiary_id', subsidiaryId)
      .order('fiscal_year', { ascending: false })
      .order('quarter', { ascending: false })
      .limit(1)
      .single();

    if (error) throw error;
    return data;
  } catch (error) {
    console.error('Failed to fetch latest financial data:', error);
    return null;
  }
}

/**
 * íŠ¹ì • ë²•ì¸ì˜ ìµœê·¼ Në¶„ê¸° ì¬ë¬´ ë°ì´í„° ì¡°íšŒ (ì°¨íŠ¸ìš©)
 */
export async function getFinancialTrend(
  subsidiaryId: string,
  quarters: number = 4
): Promise<FinancialData[]> {
  try {
    const { data, error } = await supabase
      .from('financial_data')
      .select('*')
      .eq('subsidiary_id', subsidiaryId)
      .order('fiscal_year', { ascending: false })
      .order('quarter', { ascending: false })
      .limit(quarters);

    if (error) throw error;
    return data || [];
  } catch (error) {
    console.error('Failed to fetch financial trend:', error);
    return [];
  }
}
```

#### Step 4-2: SubsidiaryCard ì»´í¬ë„ŒíŠ¸ ìƒì„±

**Cursor Prompt:**

```
components/dashboard/SubsidiaryCard.tsxë¥¼ ë§Œë“¤ì–´ì¤˜:

ìš”êµ¬ì‚¬í•­:
1. 'use client' ì»´í¬ë„ŒíŠ¸
2. useEffectë¡œ selectedSubsidiaryId ë³€ê²½ ì‹œ ë°ì´í„° fetch
3. ë¡œë”© ìƒíƒœ: Skeleton (shadcn/ui)
4. ì—ëŸ¬ ìƒíƒœ: ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ

UI êµ¬ì¡° (shadcn Card ì‚¬ìš©):
- CardHeader: 
  - ë²•ì¸ëª… (text-2xl font-bold)
  - ë„ì‹œ, êµ­ê°€ (text-sm text-gray-500)
  - ë‹«ê¸° ë²„íŠ¼ (ìš°ì¸¡ ìƒë‹¨)
- CardContent:
  - ë¶„ê¸° ì •ë³´ (Badgeë¡œ "2024 Q4")
  - 3ê°œ ë©”íŠ¸ë¦­:
    * ë§¤ì¶œì•¡ (text-3xl font-bold)
    * ì˜ì—…ì´ìµ (text-xl)
    * ì˜ì—…ì´ìµë¥  (text-xl, ë§ˆì´ë„ˆìŠ¤ë©´ text-red-600)
  - êµ¬ë¶„ì„  (Separator)
  - FinancialChart ì»´í¬ë„ŒíŠ¸ (ë‹¤ìŒ ë‹¨ê³„ì—ì„œ êµ¬í˜„)

Props:
- subsidiaryId: string | null
- onClose: () => void

ìŠ¤íƒ€ì¼:
- ê³ ì • ë„ˆë¹„ 400px (ë°ìŠ¤í¬í†±)
- ìµœëŒ€ ë†’ì´ 80vh, overflow-y-auto
- ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ (animate-in slide-in-from-right)
```

**ìƒì„±ëœ íŒŒì¼:**

```typescript
// components/dashboard/SubsidiaryCard.tsx
'use client';

import { useEffect, useState } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Button } from '@/components/ui/button';
import { Skeleton } from '@/components/ui/skeleton';
import { Separator } from '@/components/ui/separator';
import { X } from 'lucide-react';
import { getLatestFinancialData, getFinancialTrend } from '@/lib/services/financialService';
import { formatKRW, formatMargin, formatPeriod, calculateMargin } from '@/lib/utils/format';
import type { FinancialData, FinancialDataWithSubsidiary } from '@/lib/supabase/types';

interface SubsidiaryCardProps {
  subsidiaryId: string | null;
  onClose: () => void;
}

export function SubsidiaryCard({ subsidiaryId, onClose }: SubsidiaryCardProps) {
  const [data, setData] = useState<FinancialDataWithSubsidiary | null>(null);
  const [trendData, setTrendData] = useState<FinancialData[]>([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    if (!subsidiaryId) return;

    async function fetchData() {
      setLoading(true);
      setError(null);

      try {
        const [latest, trend] = await Promise.all([
          getLatestFinancialData(subsidiaryId),
          getFinancialTrend(subsidiaryId, 4),
        ]);

        if (!latest) {
          setError('ì¬ë¬´ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
          return;
        }

        setData(latest);
        setTrendData(trend);
      } catch (err) {
        setError('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        console.error(err);
      } finally {
        setLoading(false);
      }
    }

    fetchData();
  }, [subsidiaryId]);

  if (!subsidiaryId) return null;

  return (
    <div className="fixed top-0 right-0 h-full w-[400px] bg-white border-l border-gray-200 shadow-xl z-50 animate-in slide-in-from-right duration-300">
      <Card className="h-full border-0 rounded-none overflow-y-auto">
        <CardHeader className="sticky top-0 bg-white border-b z-10">
          <div className="flex items-start justify-between">
            <div className="flex-1">
              {loading ? (
                <>
                  <Skeleton className="h-8 w-48 mb-2" />
                  <Skeleton className="h-4 w-32" />
                </>
              ) : data ? (
                <>
                  <CardTitle className="text-2xl">{data.subsidiaries.name}</CardTitle>
                  <p className="text-sm text-gray-500 mt-1">
                    {data.subsidiaries.city}, {data.subsidiaries.country}
                  </p>
                </>
              ) : null}
            </div>
            <Button variant="ghost" size="icon" onClick={onClose}>
              <X className="h-4 w-4" />
            </Button>
          </div>
        </CardHeader>

        <CardContent className="pt-6">
          {loading && (
            <div className="space-y-4">
              <Skeleton className="h-6 w-24" />
              <Skeleton className="h-16 w-full" />
              <Skeleton className="h-16 w-full" />
              <Skeleton className="h-16 w-full" />
            </div>
          )}

          {error && (
            <div className="text-center py-8 text-red-600">
              {error}
            </div>
          )}

          {!loading && !error && data && (
            <div className="space-y-6">
              {/* Period Badge */}
              <Badge variant="secondary" className="text-sm">
                {formatPeriod(data.fiscal_year, data.quarter)} ì‹¤ì 
              </Badge>

              {/* Metrics */}
              <div className="space-y-4">
                <div>
                  <p className="text-sm text-gray-500 mb-1">ë§¤ì¶œì•¡</p>
                  <p className="text-3xl font-bold">{formatKRW(data.revenue_krw)}</p>
                </div>

                <div>
                  <p className="text-sm text-gray-500 mb-1">ì˜ì—…ì´ìµ</p>
                  <p className={`text-xl font-semibold ${
                    (data.operating_profit_krw || 0) < 0 ? 'text-red-600' : 'text-gray-900'
                  }`}>
                    {formatKRW(data.operating_profit_krw || 0)}
                  </p>
                </div>

                <div>
                  <p className="text-sm text-gray-500 mb-1">ì˜ì—…ì´ìµë¥ </p>
                  <p className={`text-xl font-semibold ${
                    calculateMargin(data.operating_profit_krw || 0, data.revenue_krw) < 0
                      ? 'text-red-600'
                      : 'text-gray-900'
                  }`}>
                    {formatMargin(
                      calculateMargin(data.operating_profit_krw || 0, data.revenue_krw)
                    )}
                  </p>
                </div>
              </div>

              <Separator />

              {/* Chart Section - ë‹¤ìŒ ë‹¨ê³„ì—ì„œ êµ¬í˜„ */}
              <div>
                <h3 className="text-sm font-medium text-gray-700 mb-4">ìµœê·¼ 4ë¶„ê¸° ì¶”ì´</h3>
                <div className="h-64 bg-gray-50 rounded-lg flex items-center justify-center text-gray-400">
                  ì°¨íŠ¸ëŠ” ë‹¤ìŒ ë‹¨ê³„ì—ì„œ êµ¬í˜„
                </div>
              </div>
            </div>
          )}
        </CardContent>
      </Card>
    </div>
  );
}
```

#### Step 4-3: DashboardClient ì—…ë°ì´íŠ¸

**Cursor Prompt:**

```
components/dashboard/DashboardClient.tsxë¥¼ ì—…ë°ì´íŠ¸í•´ì¤˜:

ë³€ê²½ì‚¬í•­:
1. SubsidiaryCard import
2. ë ˆì´ì•„ì›ƒ ë³€ê²½:
   - selectedSubsidiaryIdê°€ ìˆì„ ë•Œ: WorldMap 70% + SubsidiaryCard 30%
   - ì—†ì„ ë•Œ: WorldMap 100%
3. SubsidiaryCardì˜ onClose í•¸ë“¤ëŸ¬ ì¶”ê°€

ë ˆì´ì•„ì›ƒ:
- flexë¡œ êµ¬ì„±
- WorldMap: flex-1
- SubsidiaryCard: ê³ ì •í­ (ìì²´ ìŠ¤íƒ€ì¼ ì ìš©)
```

**ì—…ë°ì´íŠ¸ëœ ì½”ë“œ:**

```typescript
// components/dashboard/DashboardClient.tsx
'use client';

import { useState } from 'react';
import { Subsidiary } from '@/lib/supabase/types';
import { WorldMap } from './WorldMap';
import { SubsidiaryCard } from './SubsidiaryCard';
import { formatDate } from '@/lib/utils/format';

interface DashboardClientProps {
  subsidiaries: Subsidiary[];
}

export function DashboardClient({ subsidiaries }: DashboardClientProps) {
  const [selectedSubsidiaryId, setSelectedSubsidiaryId] = useState<string | null>(null);

  return (
    <div className="flex flex-col h-screen">
      {/* Header */}
      <header className="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6 z-10">
        <h1 className="text-xl font-bold text-gray-900">
          InBody í•´ì™¸ë²•ì¸ ëŒ€ì‹œë³´ë“œ
        </h1>
        <div className="text-sm text-gray-500">
          ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: {formatDate(new Date())}
        </div>
      </header>

      {/* Main Content */}
      <main className="flex-1 flex overflow-hidden">
        {/* Map Section */}
        <div className={`transition-all duration-300 ${
          selectedSubsidiaryId ? 'w-[calc(100%-400px)]' : 'w-full'
        }`}>
          <div className="h-full p-6 bg-gray-50">
            <div className="h-full max-w-7xl mx-auto">
              <WorldMap
                subsidiaries={subsidiaries}
                selectedId={selectedSubsidiaryId}
                onSubsidiaryClick={setSelectedSubsidiaryId}
              />
            </div>
          </div>
        </div>

        {/* Subsidiary Card */}
        <SubsidiaryCard
          subsidiaryId={selectedSubsidiaryId}
          onClose={() => setSelectedSubsidiaryId(null)}
        />
      </main>
    </div>
  );
}
```

#### Step 4-4: í…ŒìŠ¤íŠ¸

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] ë²•ì¸ ë§ˆì»¤ í´ë¦­ ì‹œ ì˜¤ë¥¸ìª½ì— ì¹´ë“œ ìŠ¬ë¼ì´ë“œì¸
- [ ] ë¡œë”© ìŠ¤ì¼ˆë ˆí†¤ í‘œì‹œ
- [ ] ë²•ì¸ëª…, ë„ì‹œ, êµ­ê°€ ì •í™•íˆ í‘œì‹œ
- [ ] ë§¤ì¶œì•¡, ì˜ì—…ì´ìµ, ì´ìµë¥  ì •í™•íˆ ê³„ì‚°
- [ ] ë‹«ê¸°(X) ë²„íŠ¼ í´ë¦­ ì‹œ ì¹´ë“œ ë‹«í˜
- [ ] ë‹¤ë¥¸ ë²•ì¸ í´ë¦­ ì‹œ ì¹´ë“œ ë‚´ìš© ë³€ê²½

---

### 5.5 ì¬ë¬´ ì°¨íŠ¸ êµ¬í˜„ (1-2ì‹œê°„)

#### Step 5-1: FinancialChart ì»´í¬ë„ŒíŠ¸ ìƒì„±

**Cursor Prompt:**

```
components/dashboard/FinancialChart.tsxë¥¼ ë§Œë“¤ì–´ì¤˜:

ìš”êµ¬ì‚¬í•­:
1. Rechartsì˜ BarChart ì‚¬ìš©
2. ìµœê·¼ 4ë¶„ê¸° ë§¤ì¶œ ì¶”ì´ ì‹œê°í™”
3. Xì¶•: "2024 Q1" í˜•ì‹
4. Yì¶•: ì–µì› ë‹¨ìœ„
5. Tooltipì— ì •í™•í•œ ê¸ˆì•¡ í‘œì‹œ
6. ë°˜ì‘í˜• (ResponsiveContainer)

Props:
- data: FinancialData[]

ë°ì´í„° ê°€ê³µ:
- fiscal_year, quarter â†’ "YYYY QN" í˜•ì‹
- revenue_krw â†’ ì–µì› ë‹¨ìœ„ë¡œ ë³€í™˜
- ì˜¤ë˜ëœ ìˆœì„œë¡œ ì •ë ¬ (ì°¨íŠ¸ëŠ” ì‹œê°„ ìˆœ)

ìŠ¤íƒ€ì¼:
- Bar ìƒ‰ìƒ: #3B82F6 (blue-500)
- Grid: ì ì„ 
- Tooltip: ì¹´ë“œ ìŠ¤íƒ€ì¼, ê·¸ë¦¼ì
```

**ìƒì„±ëœ íŒŒì¼:**

```typescript
// components/dashboard/FinancialChart.tsx
'use client';

import { useMemo } from 'react';
import {
  BarChart,
  Bar,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  ResponsiveContainer,
  TooltipProps,
} from 'recharts';
import { FinancialData } from '@/lib/supabase/types';
import { formatKRW, formatPeriod } from '@/lib/utils/format';

interface FinancialChartProps {
  data: FinancialData[];
}

interface ChartDataPoint {
  period: string;
  revenue: number; // ì–µì› ë‹¨ìœ„
  revenueRaw: number; // ì› ë‹¨ìœ„ (tooltipìš©)
}

export function FinancialChart({ data }: FinancialChartProps) {
  const chartData = useMemo<ChartDataPoint[]>(() => {
    // ì‹œê°„ ìˆœì„œëŒ€ë¡œ ì •ë ¬ (ì˜¤ë˜ëœ ê²ƒë¶€í„°)
    const sorted = [...data].sort((a, b) => {
      if (a.fiscal_year !== b.fiscal_year) {
        return a.fiscal_year - b.fiscal_year;
      }
      return a.quarter - b.quarter;
    });

    return sorted.map((d) => ({
      period: formatPeriod(d.fiscal_year, d.quarter),
      revenue: d.revenue_krw / 100000000, // ì–µì› ë‹¨ìœ„
      revenueRaw: d.revenue_krw,
    }));
  }, [data]);

  if (chartData.length === 0) {
    return (
      <div className="h-64 flex items-center justify-center text-gray-400">
        í‘œì‹œí•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.
      </div>
    );
  }

  return (
    <ResponsiveContainer width="100%" height={300}>
      <BarChart data={chartData} margin={{ top: 10, right: 10, left: 10, bottom: 10 }}>
        <CartesianGrid strokeDasharray="3 3" stroke="#e5e7eb" />
        <XAxis
          dataKey="period"
          tick={{ fontSize: 12 }}
          tickLine={false}
        />
        <YAxis
          tick={{ fontSize: 12 }}
          tickLine={false}
          tickFormatter={(value) => `${value}ì–µ`}
        />
        <Tooltip content={<CustomTooltip />} />
        <Bar
          dataKey="revenue"
          fill="#3B82F6"
          radius={[4, 4, 0, 0]}
          maxBarSize={60}
        />
      </BarChart>
    </ResponsiveContainer>
  );
}

function CustomTooltip({ active, payload }: TooltipProps<number, string>) {
  if (!active || !payload || !payload[0]) return null;

  const data = payload[0].payload as ChartDataPoint;

  return (
    <div className="bg-white p-3 rounded-lg shadow-lg border border-gray-200">
      <p className="text-sm font-medium text-gray-900 mb-1">{data.period}</p>
      <p className="text-lg font-bold text-blue-600">
        {formatKRW(data.revenueRaw)}
      </p>
    </div>
  );
}
```

#### Step 5-2: SubsidiaryCardì— ì°¨íŠ¸ ì¶”ê°€

**Cursor Prompt:**

```
components/dashboard/SubsidiaryCard.tsxë¥¼ ì—…ë°ì´íŠ¸í•´ì¤˜:

ë³€ê²½ì‚¬í•­:
1. FinancialChart import
2. "ì°¨íŠ¸ëŠ” ë‹¤ìŒ ë‹¨ê³„ì—ì„œ êµ¬í˜„" ë¶€ë¶„ì„ ì‹¤ì œ ì°¨íŠ¸ë¡œ êµì²´
3. trendDataê°€ ë¹„ì–´ìˆìœ¼ë©´ "ë°ì´í„° ì—†ìŒ" ë©”ì‹œì§€

ì¡°ê±´:
- trendData.length > 0ì¼ ë•Œë§Œ ì°¨íŠ¸ ë Œë”ë§
```

**ì—…ë°ì´íŠ¸ëœ ë¶€ë¶„:**

```typescript
// components/dashboard/SubsidiaryCard.tsx (ì¼ë¶€)
import { FinancialChart } from './FinancialChart';

// ... (ê¸°ì¡´ ì½”ë“œ)

<div>
  <h3 className="text-sm font-medium text-gray-700 mb-4">ìµœê·¼ 4ë¶„ê¸° ì¶”ì´</h3>
  {trendData.length > 0 ? (
    <FinancialChart data={trendData} />
  ) : (
    <div className="h-64 bg-gray-50 rounded-lg flex items-center justify-center text-gray-400">
      ì¶”ì´ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.
    </div>
  )}
</div>
```

#### Step 5-3: í…ŒìŠ¤íŠ¸

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] ì°¨íŠ¸ê°€ ë Œë”ë§ë¨
- [ ] 4ê°œ ë§‰ëŒ€ê°€ í‘œì‹œ (ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš°)
- [ ] Xì¶• ë¼ë²¨ "2024 Q1" í˜•ì‹
- [ ] Yì¶• "500ì–µ" í˜•ì‹
- [ ] ë§‰ëŒ€ hover ì‹œ tooltip í‘œì‹œ
- [ ] tooltipì— ì •í™•í•œ ê¸ˆì•¡ í‘œì‹œ

---

### 5.6 UI/UX ê°œì„  (1-2ì‹œê°„)

#### Step 5-6-1: ì§€ë„ Tooltip ì¶”ê°€

**Cursor Prompt:**

```
components/dashboard/WorldMap.tsxë¥¼ ì—…ë°ì´íŠ¸í•´ì¤˜:

react-tooltipì„ ì‚¬ìš©í•´ì„œ ë§ˆì»¤ hover ì‹œ ë²•ì¸ëª… í‘œì‹œ

ìš”êµ¬ì‚¬í•­:
1. react-tooltip íŒ¨í‚¤ì§€ import
2. ê° Markerì— data-tooltip-id, data-tooltip-content ì¶”ê°€
3. Tooltip ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ (ì§€ë„ ì™¸ë¶€)

ìŠ¤íƒ€ì¼:
- ì‘ì€ í°íŠ¸ (text-xs)
- ì–´ë‘ìš´ ë°°ê²½
- ë¹ ë¥¸ í‘œì‹œ (delayShow: 100ms)
```

#### Step 5-6-2: ë¡œë”© ìƒíƒœ ê°œì„ 

**Cursor Prompt:**

```
app/loading.tsxë¥¼ ë§Œë“¤ì–´ì¤˜:

ì „ì²´ í˜ì´ì§€ ë¡œë”© skeleton:
- í—¤ë” skeleton
- ì§€ë„ ì˜ì—­ skeleton (íšŒìƒ‰ ë°°ê²½ + pulse ì• ë‹ˆë©”ì´ì…˜)

shadcn Skeleton ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©
```

#### Step 5-6-3: ì—ëŸ¬ í˜ì´ì§€ ì¶”ê°€

**Cursor Prompt:**

```
app/error.tsxë¥¼ ë§Œë“¤ì–´ì¤˜:

Error Boundary:
- 'use client' ì»´í¬ë„ŒíŠ¸
- ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
- "ë‹¤ì‹œ ì‹œë„" ë²„íŠ¼
- reset() í•¨ìˆ˜ í˜¸ì¶œ

ë””ìì¸:
- ì¤‘ì•™ ì •ë ¬
- ì•„ì´ì½˜ í¬í•¨
- ì¹œì ˆí•œ ë©”ì‹œì§€
```

#### Step 5-6-4: ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ

**Cursor Prompt:**

```
components/dashboard/DashboardClient.tsxë¥¼ ì—…ë°ì´íŠ¸í•´ì¤˜:

ëª¨ë°”ì¼ ë°˜ì‘í˜•:
- 768px ì´í•˜: SubsidiaryCardë¥¼ í•˜ë‹¨ ìŠ¬ë¼ì´ë“œì—… (drawer ìŠ¤íƒ€ì¼)
- 768px ì´ìƒ: í˜„ì¬ ìš°ì¸¡ íŒ¨ë„ ìœ ì§€

Tailwind breakpoints ì‚¬ìš©:
- md:w-[400px] (ë°ìŠ¤í¬í†±)
- max-md:bottom-0 max-md:right-0 max-md:left-0 max-md:h-[70vh] (ëª¨ë°”ì¼)
```

#### Step 5-6-5: ë§ˆì´í¬ë¡œ ì¸í„°ë™ì…˜

**Cursor Prompt:**

```
ë‹¤ìŒ ì»´í¬ë„ŒíŠ¸ë“¤ì— transition íš¨ê³¼ ì¶”ê°€:

1. WorldMap.tsx:
   - ë§ˆì»¤ hover: scale, opacity transition
   - ì„ íƒëœ ë§ˆì»¤: pulse ì• ë‹ˆë©”ì´ì…˜

2. SubsidiaryCard.tsx:
   - ì¹´ë“œ ë“±ì¥: slide-in ì• ë‹ˆë©”ì´ì…˜
   - ë©”íŠ¸ë¦­ ìˆ«ì: ë¶€ë“œëŸ¬ìš´ fade-in

3. FinancialChart.tsx:
   - Bar hover: opacity ë³€ê²½

Tailwind animate í´ë˜ìŠ¤ ì‚¬ìš©
```

---

### 5.7 ìµœì¢… í…ŒìŠ¤íŠ¸ ë° ë°°í¬ (1ì‹œê°„)

#### Step 7-1: ë¡œì»¬ ì „ì²´ í…ŒìŠ¤íŠ¸

**í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸:**

```markdown
## ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] í˜ì´ì§€ ë¡œë“œ (< 2ì´ˆ)
- [ ] ì§€ë„ì— 11ê°œ ë²•ì¸ ë§ˆì»¤ í‘œì‹œ
- [ ] ë§ˆì»¤ hover ì‹œ tooltip
- [ ] ë§ˆì»¤ í´ë¦­ ì‹œ ì¹´ë“œ ì—´ë¦¼
- [ ] ì¹´ë“œì— ë²•ì¸ ì •ë³´ ì •í™•íˆ í‘œì‹œ
- [ ] ì°¨íŠ¸ì— 4ë¶„ê¸° ë°ì´í„° í‘œì‹œ
- [ ] ë‹«ê¸° ë²„íŠ¼ ì‘ë™
- [ ] ë‹¤ë¥¸ ë²•ì¸ ì„ íƒ ì‹œ ì¹´ë“œ ì—…ë°ì´íŠ¸

## UI/UX í…ŒìŠ¤íŠ¸
- [ ] ë¡œë”© ìƒíƒœ skeleton í‘œì‹œ
- [ ] ì—ëŸ¬ ë°œìƒ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€
- [ ] ì• ë‹ˆë©”ì´ì…˜ ë¶€ë“œëŸ½ê²Œ ì‘ë™
- [ ] ë°˜ì‘í˜• (ë°ìŠ¤í¬í†± + ëª¨ë°”ì¼)

## ë°ì´í„° ì •í™•ì„±
- [ ] ë§¤ì¶œì•¡ í¬ë§·íŒ… ì •í™• (ì–µì›)
- [ ] ì˜ì—…ì´ìµë¥  ê³„ì‚° ì •í™•
- [ ] ì°¨íŠ¸ Xì¶• ë¼ë²¨ ì •í™•
- [ ] ë¶„ê¸° ìˆœì„œ ì •í™• (ì˜¤ë˜ëœ ìˆœ)

## ë¸Œë¼ìš°ì € í˜¸í™˜ì„±
- [ ] Chrome
- [ ] Safari
- [ ] Firefox
```

#### Step 7-2: ë¹Œë“œ í…ŒìŠ¤íŠ¸

```bash
# í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run build

# ë¹Œë“œ ê²°ê³¼ í™•ì¸
npm run start

# ë¹Œë“œ ì—ëŸ¬ ì—†ëŠ”ì§€ í™•ì¸
# ê²½ê³  ë¬´ì‹œí•´ë„ ë¨ (dev dependency ê´€ë ¨)
```

#### Step 7-3: Vercel ë°°í¬

**Step A: GitHub Repository ìƒì„±**

```bash
# GitHubì—ì„œ ìƒˆ ì €ì¥ì†Œ ìƒì„±
# https://github.com/new

# ë¡œì»¬ ì €ì¥ì†Œ ì—°ê²°
git remote add origin https://github.com/YOUR_USERNAME/subsidiary-dashboard.git
git branch -M main
git push -u origin main
```

**Step B: Vercel í”„ë¡œì íŠ¸ ìƒì„±**

1. https://vercel.com ì ‘ì†
2. "Add New... â†’ Project" í´ë¦­
3. GitHub ì €ì¥ì†Œ import
4. Framework Preset: Next.js (ìë™ ê°ì§€)
5. Environment Variables ì¶”ê°€:
   ```
   NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
   NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGci...
   ```
6. "Deploy" í´ë¦­ (3-5ë¶„ ì†Œìš”)

**Step C: ë°°í¬ í™•ì¸**

- ë°°í¬ URL í™•ì¸ (ì˜ˆ: `subsidiary-dashboard.vercel.app`)
- ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†
- ëª¨ë“  ê¸°ëŠ¥ ì‘ë™ í™•ì¸

#### Step 7-4: README ì‘ì„±

**Cursor Prompt:**

```
README.mdë¥¼ ì‘ì„±í•´ì¤˜:

ì„¹ì…˜:
1. í”„ë¡œì íŠ¸ ì†Œê°œ
2. ì£¼ìš” ê¸°ëŠ¥ (ìŠ¤í¬ë¦°ìƒ· placeholder í¬í•¨)
3. ê¸°ìˆ  ìŠ¤íƒ
4. ë¡œì»¬ ì‹¤í–‰ ë°©ë²•
5. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
6. ë°°í¬ URL
7. ê°œë°œ ë¡œë“œë§µ (Phase 2, 3)
8. ë¼ì´ì„ ìŠ¤

í†¤: ì „ë¬¸ì ì´ì§€ë§Œ ì½ê¸° ì‰½ê²Œ
ì–¸ì–´: í•œêµ­ì–´
```

---

## 6. ê°œë°œ ì¼ì •

### 6.1 3ì¼ íƒ€ì„ë¼ì¸ (ìƒì„¸)

#### Day 1: í™”ìš”ì¼ (ì €ë… 2-3ì‹œê°„)

| ì‹œê°„ | ì‘ì—… | ì™„ë£Œ ê¸°ì¤€ |
|-----|------|----------|
| 18:00-18:30 | í”„ë¡œì íŠ¸ ì´ˆê¸°í™” (5.1) | npm run dev ì‹¤í–‰ ì„±ê³µ |
| 18:30-19:00 | Supabase ì—°ë™ (5.2) | í…Œì´ë¸” ìƒì„± ì™„ë£Œ |
| 19:00-19:30 | ë²•ì¸ ë°ì´í„° ì…ë ¥ | 11ê°œ ë²•ì¸ ì…ë ¥ í™•ì¸ |
| 19:30-20:30 | ì§€ë„ ì»´í¬ë„ŒíŠ¸ (5.3.1) | ì§€ë„ì— ë§ˆì»¤ í‘œì‹œ |
| 20:30-21:00 | ë©”ì¸ í˜ì´ì§€ ì—°ë™ (5.3.3) | ë§ˆì»¤ í´ë¦­ ë°˜ì‘ |

**Day 1 ì™„ë£Œ ìƒíƒœ:**
- âœ… ì§€ë„ì— 11ê°œ ë²•ì¸ í‘œì‹œ
- âœ… ë§ˆì»¤ í´ë¦­ ì‹œ ì½˜ì†”ì— ID ì¶œë ¥
- âœ… Git ì»¤ë°‹

---

#### Day 2: ìˆ˜ìš”ì¼ (ì €ë… 3-4ì‹œê°„)

| ì‹œê°„ | ì‘ì—… | ì™„ë£Œ ê¸°ì¤€ |
|-----|------|----------|
| 18:00-18:30 | ì¬ë¬´ ë°ì´í„° ì…ë ¥ | ìƒ˜í”Œ ë°ì´í„° 20-30ê±´ |
| 18:30-19:30 | Financial Service (5.4.1) | ë°ì´í„° fetch í•¨ìˆ˜ ì‘ë™ |
| 19:30-21:00 | SubsidiaryCard (5.4.2) | ì¹´ë“œì— ë°ì´í„° í‘œì‹œ |
| 21:00-21:30 | ë ˆì´ì•„ì›ƒ í†µí•© (5.4.3) | ì¹´ë“œ ì—´ë¦¼/ë‹«í˜ ì‘ë™ |

**Day 2 ì™„ë£Œ ìƒíƒœ:**
- âœ… ë²•ì¸ í´ë¦­ ì‹œ ì¹´ë“œ ì—´ë¦¼
- âœ… ë§¤ì¶œ/ì´ìµ ë°ì´í„° í‘œì‹œ
- âœ… Git ì»¤ë°‹

---

#### Day 3: ëª©ìš”ì¼ (ì €ë… 3-4ì‹œê°„)

| ì‹œê°„ | ì‘ì—… | ì™„ë£Œ ê¸°ì¤€ |
|-----|------|----------|
| 18:00-19:30 | ì°¨íŠ¸ êµ¬í˜„ (5.5) | 4ë¶„ê¸° ì°¨íŠ¸ í‘œì‹œ |
| 19:30-20:30 | UI ê°œì„  (5.6) | ì• ë‹ˆë©”ì´ì…˜, ë°˜ì‘í˜• |
| 20:30-21:00 | ì „ì²´ í…ŒìŠ¤íŠ¸ (5.7.1) | ì²´í¬ë¦¬ìŠ¤íŠ¸ ì™„ë£Œ |
| 21:00-21:30 | ë°°í¬ (5.7.3) | Vercel URL íšë“ |

**Day 3 ì™„ë£Œ ìƒíƒœ:**
- âœ… ëª¨ë“  ê¸°ëŠ¥ ì‘ë™
- âœ… ë°°í¬ ì™„ë£Œ
- âœ… README ì‘ì„±

---

#### Day 4: ê¸ˆìš”ì¼ (ì˜¤ì „)

| ì‹œê°„ | ì‘ì—… |
|-----|------|
| 09:00-09:30 | ìµœì¢… í™•ì¸, ë²„ê·¸ ìˆ˜ì • |
| 09:30-10:00 | ë°ëª¨ ì¤€ë¹„ (ì£¼ìš” ì‹œë‚˜ë¦¬ì˜¤ ì—°ìŠµ) |
| 10:00+ | ë¶€ì‚¬ì¥ë‹˜ê»˜ ë°ëª¨ |

---

### 6.2 ë¦¬ìŠ¤í¬ ê´€ë¦¬

| ë¦¬ìŠ¤í¬ | ë°œìƒ ê°€ëŠ¥ì„± | ëŒ€ì‘ ë°©ì•ˆ |
|--------|-----------|----------|
| 3ì¼ ì•ˆì— ì™„ì„± ëª»í•¨ | ì¤‘ | ìš°ì„ ìˆœìœ„ ë‚®ì€ ê¸°ëŠ¥ ì œê±° (tooltip, ì• ë‹ˆë©”ì´ì…˜) |
| Supabase ì—°ê²° ë¬¸ì œ | í•˜ | ë¬¸ì„œ ì°¸ì¡°, í•˜ë“œì½”ë”© ë°ì´í„°ë¡œ ìš°íšŒ |
| ì§€ë„ ë Œë”ë§ ëŠë¦¼ | í•˜ | ë²•ì¸ ìˆ˜ ì ì–´ì„œ ë¬¸ì œ ì—†ìŒ, ìµœì í™”ëŠ” Phase 2 |
| ì°¨íŠ¸ êµ¬í˜„ ë§‰í˜ | ì¤‘ | Recharts ê³µì‹ ì˜ˆì œ ì°¸ê³ , ë‹¨ìˆœ ë§‰ëŒ€ê·¸ë˜í”„ë§Œ |
| ë°°í¬ ì‹¤íŒ¨ | í•˜ | Vercel ë¡œê·¸ í™•ì¸, ë¡œì»¬ì—ì„œ build í…ŒìŠ¤íŠ¸ ë¨¼ì € |

---

## 7. ë°°í¬ ë° í…ŒìŠ¤íŠ¸

### 7.1 ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

```markdown
## Vercel ë°°í¬ ì „
- [ ] npm run build ì„±ê³µ
- [ ] í™˜ê²½ ë³€ìˆ˜ .env.local í™•ì¸
- [ ] .gitignoreì— .env.local í¬í•¨ í™•ì¸
- [ ] Git ì €ì¥ì†Œ push ì™„ë£Œ

## Vercel ì„¤ì •
- [ ] GitHub ì €ì¥ì†Œ ì—°ê²°
- [ ] Environment Variables ì…ë ¥
  - [ ] NEXT_PUBLIC_SUPABASE_URL
  - [ ] NEXT_PUBLIC_SUPABASE_ANON_KEY
- [ ] Framework Preset: Next.js
- [ ] Deploy ë²„íŠ¼ í´ë¦­

## ë°°í¬ í›„ í™•ì¸
- [ ] ë°°í¬ ì„±ê³µ (Build log í™•ì¸)
- [ ] í”„ë¡œë•ì…˜ URL ì ‘ì†
- [ ] ì§€ë„ ë Œë”ë§
- [ ] ë§ˆì»¤ í´ë¦­
- [ ] ì¹´ë“œ ë°ì´í„° í‘œì‹œ
- [ ] ì°¨íŠ¸ í‘œì‹œ
- [ ] ëª¨ë°”ì¼ ë°˜ì‘í˜•
```

### 7.2 ì„±ëŠ¥ ìµœì í™” (Phase 2)

í˜„ì¬ MVPì—ì„œëŠ” ì„±ëŠ¥ ìµœì í™”ë¥¼ ìµœì†Œí™”í•˜ê³ , Phase 2ì—ì„œ ë‹¤ìŒì„ ê°œì„ :

- [ ] ì´ë¯¸ì§€ ìµœì í™” (Next.js Image)
- [ ] ì§€ë„ ë Œë”ë§ ìµœì í™” (React.memo)
- [ ] ë°ì´í„° ìºì‹± (React Query)
- [ ] Code splitting (dynamic import)

---

## 8. íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 8.1 ìì£¼ ë°œìƒí•˜ëŠ” ì—ëŸ¬

#### ì—ëŸ¬ 1: Supabase ì—°ê²° ì‹¤íŒ¨

```
Error: Invalid Supabase URL or Key
```

**í•´ê²° ë°©ë²•:**
1. `.env.local` íŒŒì¼ í™•ì¸
2. Supabase Dashboardì—ì„œ URL, Key ì¬í™•ì¸
3. ì„œë²„ ì¬ì‹œì‘: `npm run dev` ì¢…ë£Œ í›„ ì¬ì‹¤í–‰

#### ì—ëŸ¬ 2: ì§€ë„ ë Œë”ë§ ì•ˆ ë¨

```
Module not found: Can't resolve 'react-simple-maps'
```

**í•´ê²° ë°©ë²•:**
```bash
npm install react-simple-maps
npm install -D @types/react-simple-maps
```

#### ì—ëŸ¬ 3: ì°¨íŠ¸ í‘œì‹œ ì•ˆ ë¨

```
Uncaught Error: Recharts requires DOM
```

**í•´ê²° ë°©ë²•:**
- `'use client'` ì§€ì‹œì–´ ì¶”ê°€
- Server Componentì—ì„œ Client Componentë¡œ ë³€ê²½

#### ì—ëŸ¬ 4: ë¹Œë“œ ì‹¤íŒ¨

```
Type error: Property 'XXX' does not exist
```

**í•´ê²° ë°©ë²•:**
1. TypeScript íƒ€ì… í™•ì¸
2. `lib/supabase/types.ts` ì¸í„°í˜ì´ìŠ¤ í™•ì¸
3. í•„ìš”ì‹œ `@ts-ignore` ì„ì‹œ ì‚¬ìš© (Phase 2ì—ì„œ ìˆ˜ì •)

#### ì—ëŸ¬ 5: ë°°í¬ í›„ í™˜ê²½ ë³€ìˆ˜ ì•ˆ ë¨

```
Error: Supabase client not initialized
```

**í•´ê²° ë°©ë²•:**
1. Vercel Dashboard â†’ Settings â†’ Environment Variables
2. `NEXT_PUBLIC_SUPABASE_URL`, `NEXT_PUBLIC_SUPABASE_ANON_KEY` ì¶”ê°€
3. Redeploy

### 8.2 Cursor AI ì‚¬ìš© íŒ

#### íŒ 1: êµ¬ì²´ì ì¸ í”„ë¡¬í”„íŠ¸

âŒ **ë‚˜ìœ ì˜ˆ:**
```
ì°¨íŠ¸ ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ì–´ì¤˜
```

âœ… **ì¢‹ì€ ì˜ˆ:**
```
Rechartsì˜ BarChartë¥¼ ì‚¬ìš©í•´ì„œ ìµœê·¼ 4ë¶„ê¸° ë§¤ì¶œ ì¶”ì´ë¥¼ ë³´ì—¬ì£¼ëŠ” 
FinancialChart ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì–´ì¤˜. 
Xì¶•ì€ "2024 Q1" í˜•ì‹, Yì¶•ì€ ì–µì› ë‹¨ìœ„, Tooltipì— ì •í™•í•œ ê¸ˆì•¡ í‘œì‹œ.
PropsëŠ” data: FinancialData[]
```

#### íŒ 2: ì—ëŸ¬ ì „ì²´ ë³µì‚¬

ì—ëŸ¬ ë°œìƒ ì‹œ:
1. ì „ì²´ ì—ëŸ¬ ë©”ì‹œì§€ ë³µì‚¬ (ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ í¬í•¨)
2. Cursorì— ë¶™ì—¬ë„£ê¸°
3. "ì´ ì—ëŸ¬ë¥¼ ì–´ë–»ê²Œ í•´ê²°í•˜ë‚˜ìš”?" ì§ˆë¬¸

#### íŒ 3: ì½”ë“œ ë¦¬ë·° ìš”ì²­

```
ë‹¤ìŒ ì½”ë“œë¥¼ ê²€í† í•˜ê³  ê°œì„ ì ì„ ì œì•ˆí•´ì¤˜:
[ì½”ë“œ ë¶™ì—¬ë„£ê¸°]

íŠ¹íˆ:
1. íƒ€ì… ì•ˆì „ì„±
2. ì—ëŸ¬ ì²˜ë¦¬
3. ì„±ëŠ¥ ìµœì í™”
```

#### íŒ 4: ë‹¨ê³„ë³„ ì‘ì—…

í•œ ë²ˆì— ë„ˆë¬´ ë§ì€ ê²ƒì„ ìš”ì²­í•˜ì§€ ë§ê³ :
1. ê¸°ë³¸ êµ¬ì¡° ìƒì„±
2. ë°ì´í„° ì—°ë™
3. ìŠ¤íƒ€ì¼ë§
4. ìµœì í™”

ìˆœì„œëŒ€ë¡œ ì§„í–‰

---

## 9. Phase 2 ë¡œë“œë§µ (ì°¸ê³ ìš©)

### 9.1 ì—‘ì…€ ì—…ë¡œë“œ ê¸°ëŠ¥ (Week 1)

- [ ] íŒŒì¼ ì—…ë¡œë“œ UI (react-dropzone)
- [ ] ì—‘ì…€ íŒŒì‹± (xlsx)
- [ ] ë°ì´í„° ê²€ì¦
- [ ] Supabase bulk insert
- [ ] ì—…ë¡œë“œ íˆìŠ¤í† ë¦¬ í…Œì´ë¸”

### 9.2 4ê°œ ì¹´í…Œê³ ë¦¬ êµ¬í˜„ (Week 2)

- [ ] íƒ­ ë„¤ë¹„ê²Œì´ì…˜ (shadcn Tabs)
- [ ] **ì¬ë¬´ì‹¤ì **: í™•ì¥ëœ ì§€í‘œ, í•„í„°ë§
- [ ] **ë‚´ë¶€ê±°ë˜**: ë²•ì¸ ê°„ ê±°ë˜ ë‚´ì—­
- [ ] **ì‹œìŠ¤í…œ ì‚¬ìš©**: ERP ì‚¬ìš© í˜„í™©
- [ ] **ë¶„ê¸°ë³„ ë§ˆê° ì¼ì •í‘œ**: ìº˜ë¦°ë” ë·°

### 9.3 ê³ ê¸‰ ê¸°ëŠ¥ (Week 3)

- [ ] ëª©í‘œ ëŒ€ë¹„ ë‹¬ì„±ë¥  ê³„ì‚° ë° í‘œì‹œ
- [ ] ì „ë…„ ë™ê¸° ëŒ€ë¹„ ì„±ì¥ë¥ 
- [ ] PDF/Excel Export
- [ ] ë‹¤í¬ ëª¨ë“œ
- [ ] ì‚¬ìš©ì ì¸ì¦ (Supabase Auth)

---

## 10. ì—°ë½ì²˜ ë° ì§€ì›

### ê°œë°œì
- ì´ë¦„: ì¡°ìŠ¹í˜„
- ì†Œì†: InBody Global Business Support Team
- ì´ë©”ì¼: (ì¶”ê°€ ì˜ˆì •)

### ê¸°ìˆ  ì§€ì›
- Supabase Discord: https://discord.supabase.com
- Next.js Discussions: https://github.com/vercel/next.js/discussions
- Cursor Community: https://forum.cursor.sh

---

## ë³€ê²½ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ë³€ê²½ ë‚´ìš© |
|-----|------|----------|
| 0.1.0 | 2026-01-07 | ì´ˆì•ˆ ì‘ì„± |

---

